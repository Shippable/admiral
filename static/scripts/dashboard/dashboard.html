<div>
  <div class="text-right">
    <button class="btn btn-md" type="submit" ng-click="vm.showEULAModal()">
      EULA
    </button>
    <button class="btn btn-md" type="submit" ng-click="vm.logOutOfAdmiral($event)">
      Log out
    </button>
  </div>
  <div class="text-center">
    <h2>Admiral - Shippable Admin Panel</h2>
  </div>
  <div>
    <div class="col-md-offset-1 col-md-10">
      <div class="panel-group">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">
              <a data-toggle="collapse" href="#initpanel">1. Initialize Infrastructure</a>
            </h3>
          </div>
          <div id="initpanel" class="panel-collapse collapse in">
            <div class="panel-body">
              <div ng-if="!vm.isLoaded">
                Loading...
              </div>
              <div class="col-md-offset-1 col-md-10" ng-if="vm.isLoaded">
                <div class="row">
                  <table class="table table-condensed">
                    <thead>
                      <tr ng-if="vm.initializeResponse">
                        <th colspan=8>
                          <div class="alert alert-danger">
                            {{vm.errorMessage}}
                          </div>
                        </th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr class="active">
                        <td colspan="4">
                          <b>Installer Access Key:</b>
                        </td>
                        <td class="text-right" colspan="2">
                          <a href="http://www.shippable.com/contact.html">contact us to obtain your keys</a>
                        </td>
                        <td>
                          <div>
                            <input type="text" class="form-control input-sm" name="installerAccessKey" placeholder="Access Key (Optional)" ng-disabled="vm.initializing"
                            ng-model="vm.initializeForm.installerAccessKey"/>
                          </div>
                        </td>
                        <td>
                        </td>
                      </tr>
                      <tr>
                        <td colspan="3">
                          <b>Installer Secret Key:</b>
                        </td>
                        <td colspan="3">
                        </td>
                        <td>
                          <div>
                            <input type="text" class="form-control input-sm" name="installerSecretKey" placeholder="Secret Key (Optional)" ng-disabled="vm.initializing"
                            ng-model="vm.initializeForm.installerSecretKey"/>
                          </div>
                        </td>
                        <td>
                        </td>
                      </tr>
                      <tr class="active">
                        <td style="width: 12.5%;">
                          <b>Admiral Environment:</b>
                        </td>
                        <td colspan="5">
                        </td>
                        <td>
                          <button class="btn btn-sm btn-default" ng-click="vm.showAdmiralEnvModal()">config</button>
                        </td>
                        <td>
                        </td>
                      </tr>
                      <tr>
                        <td style="width: 12.5%;">
                          <b>Database:</b>
                        </td>
                        <td colspan="5">
                        </td>
                        <td>
                          <button class="btn btn-sm btn-default" ng-click="vm.showConfigModal('db')">config</button>
                          <button class="btn btn-sm btn-default" ng-click="vm.showLogModal('db')" ng-disabled="!vm.systemSettings.db.isProcessing && !vm.systemSettings.db.isFailed && !vm.systemSettings.db.isInitialized">logs</button>
                        </td>
                        <td class="text-center">
                          <span ng-if="vm.systemSettings.db.isProcessing">initializing...</span>
                          <span ng-if="!vm.systemSettings.db.isProcessing && !vm.systemSettings.db.isFailed">
                            {{vm.systemSettings.db.isInitialized ? 'initialized' : 'not initialized'}}
                          </span>
                          <span ng-if="!vm.systemSettings.db.isProcessing && vm.systemSettings.db.isFailed">failed &#x26a0;</span>
                        </td>
                      </tr>
                      <!-- Secrets -->
                      <tr class="active">
                        <td ng-if="vm.initializeForm.secrets.initType === 'admiral'">
                          <b>Secrets:</b>
                        </td>
                        <td rowspan="5" style="width: 12.5%;" ng-if="vm.initializeForm.secrets.initType === 'new'">
                          <b>Secrets:</b>
                        </td>
                        <td rowspan="3" style="width: 12.5%;" ng-if="vm.initializeForm.secrets.initType === 'existing'">
                          <b>Secrets:</b>
                        </td>
                        <td colspan="5">
                          Install Location:
                          <span>
                            <input type="radio" ng-model="vm.initializeForm.secrets.initType" ng-disabled="vm.systemSettings.secrets.isInitialized || vm.initializing" value="admiral">
                            This Node
                          </span>
                          <span>
                            <input type="radio" ng-model="vm.initializeForm.secrets.initType" ng-disabled="vm.systemSettings.secrets.isInitialized || vm.initializing" value="new">
                            New Node
                          </span>
                          <span>
                            <input type="radio" ng-model="vm.initializeForm.secrets.initType" value="existing" ng-disabled="vm.systemSettings.secrets.isInitialized || vm.initializing">
                            Existing
                          </span>
                        </td>
                        <td>
                          <button class="btn btn-sm btn-default" ng-click="vm.showConfigModal('secrets')" ng-disabled="!vm.systemSettings.db.isInitialized">config</button>
                          <button class="btn btn-sm btn-default" ng-click="vm.showLogModal('secrets')" ng-disabled="!vm.systemSettings.secrets.isProcessing && !vm.systemSettings.secrets.isFailed && !vm.systemSettings.secrets.isInitialized">logs</button>
                        </td>
                        <td style="width: 12.5%;" class="text-center">
                          <span ng-if="vm.systemSettings.secrets.isProcessing">initializing...</span>
                          <span ng-if="!vm.systemSettings.secrets.isProcessing && !vm.systemSettings.secrets.isFailed">
                            {{vm.systemSettings.secrets.isInitialized ? 'initialized' : 'not initialized'}}
                          </span>
                          <span ng-if="!vm.systemSettings.secrets.isProcessing && vm.systemSettings.secrets.isFailed">failed &#x26a0;</span>
                        </td>
                      </tr>
                      <tr class="active" ng-if="vm.initializeForm.secrets.initType === 'new'">
                        <td colspan="3">
                          <span>IP address where you would like Secrets installed:</span>
                        </td>
                        <td colspan="3">
                          <div ng-class="vm.validateIP(vm.initializeForm.secrets.address)">
                            <input type="text" class="form-control input-sm" name="secretsAddress" placeholder="0.0.0.0" ng-disabled="vm.systemSettings.secrets.isInitialized || vm.initializing"
                            ng-model="vm.initializeForm.secrets.address"/>
                          </div>
                        </td>
                        <td>
                        </td>
                      </tr>
                      <tr class="active" ng-if="vm.initializeForm.secrets.initType === 'new'">
                        <td colspan="7">
                          Please run this command on your node to authorize SSH access:
                        </td>
                      </tr>
                      <tr class="active" ng-if="vm.initializeForm.secrets.initType === 'new'">
                        <td colspan="6">
                          <div class="ss-action"></div>
                          <div class="ship-console" style="word-break: break-all;">
                            {{vm.initializeForm.sshCommand}}
                          </div>
                        </td>
                        <td>
                        </td>
                      </tr>
                      <tr class="active" ng-if="vm.initializeForm.secrets.initType === 'new'">
                        <td colspan="6" ng-class="vm.initializeForm.secrets.confirmCommand ? '' : 'has-error'">
                          <div class="checkbox">
                            <input type="checkbox" ng-model="vm.initializeForm.secrets.confirmCommand"/>
                            Click here once you have run the above command on your node
                          </div>
                        </td>
                        <td>
                        </td>
                      </tr>
                      <tr class="active" ng-if=" vm.initializeForm.secrets.initType === 'existing'">
                        <td colspan="3">
                          <span>IP address of your existing Secrets installation:</span>
                        </td>
                        <td colspan="3">
                          <div ng-class="vm.validateIP(vm.initializeForm.secrets.address)">
                            <input type="text" class="form-control input-sm" name="secretsAddress" placeholder="0.0.0.0" ng-disabled="vm.systemSettings.secrets.isInitialized || vm.initializing"
                            ng-model="vm.initializeForm.secrets.address"/>
                          </div>
                        </td>
                        <td>
                        </td>
                      </tr>
                      <tr class="active" ng-if="vm.initializeForm.secrets.initType === 'existing'">
                        <td colspan="3">
                          <span>Root token for your Secrets installation:</span>
                        </td>
                        <td colspan="3">
                          <div ng-class="vm.initializeForm.secrets.rootToken.length ? '' : 'has-error'">
                            <input type="text" class="form-control input-sm" name="secretsRootToken" placeholder="root token" ng-disabled="vm.initializing"
                            ng-model="vm.initializeForm.secrets.rootToken"/>
                          </div>
                        </td>
                        <td>
                        </td>
                      </tr>
                      <!-- RabbitMQ -->
                      <tr>
                        <td ng-if="vm.initializeForm.msg.initType === 'admiral'" rowspan="2">
                          <b>Messaging:</b>
                        </td>
                        <td ng-if="vm.initializeForm.msg.initType === 'new'" rowspan="6" style="width: 12.5%;">
                          <b>Messaging:</b>
                        </td>
                        <td ng-if="vm.initializeForm.msg.initType === 'existing'" rowspan="5" style="width: 12.5%;">
                          <b>Messaging:</b>
                        </td>
                        <td colspan="5">
                          Install Location:
                          <span>
                            <input type="radio" ng-model="vm.initializeForm.msg.initType" ng-disabled="vm.systemSettings.msg.isInitialized || vm.initializing" value="admiral">
                            This Node
                          </span>
                          <span>
                            <input type="radio" ng-model="vm.initializeForm.msg.initType" ng-disabled="vm.systemSettings.msg.isInitialized || vm.initializing" value="new">
                            New Node
                          </span>
                          <span>
                            <input type="radio" ng-model="vm.initializeForm.msg.initType" value="existing" ng-disabled="vm.systemSettings.msg.isInitialized || vm.initializing">
                            Existing
                          </span>
                        </td>
                        <td>
                          <button class="btn btn-sm btn-default" ng-click="vm.showConfigModal('msg')" ng-disabled="!vm.systemSettings.db.isInitialized">config</button>
                          <button class="btn btn-sm btn-default" ng-click="vm.showLogModal('msg')" ng-disabled="!vm.systemSettings.msg.isProcessing && !vm.systemSettings.msg.isFailed && !vm.systemSettings.msg.isInitialized">logs</button>
                        </td>
                        <td style="width: 12.5%;" class="text-center">
                          <span ng-if="vm.systemSettings.msg.isProcessing">initializing...</span>
                          <span ng-if="!vm.systemSettings.msg.isProcessing && !vm.systemSettings.msg.isFailed">
                            {{vm.systemSettings.msg.isInitialized ? 'initialized' : 'not initialized'}}
                          </span>
                          <span ng-if="!vm.systemSettings.msg.isProcessing && vm.systemSettings.msg.isFailed">failed &#x26a0;</span>
                        </td>
                      </tr>
                      <tr ng-if="vm.initializeForm.msg.initType === 'existing'">
                        <td colspan="3">
                          <span>RabbitMQ Username:</span>
                        </td>
                        <td colspan="3">
                          <div ng-class="vm.initializeForm.msg.username.length ? '' : 'has-error'">
                            <input type="text" class="form-control input-sm" name="msgUsername"
                            ng-model="vm.initializeForm.msg.username" placeholder="username" ng-disabled="vm.systemSettings.msg.isInitialized || vm.initializing"/>
                          </div>
                        </td>
                        <td>
                        </td>
                      </tr>
                      <tr>
                        <td colspan="3">
                          <span ng-if="vm.initializeForm.msg.initType !== 'existing'">Choose a password for RabbitMQ:</span>
                          <span ng-if="vm.initializeForm.msg.initType === 'existing'">RabbitMQ Password:</span>
                        </td>
                        <td colspan="3">
                          <div ng-class="vm.validatePassword(vm.initializeForm.msg.password)">
                            <input type="text" class="form-control input-sm" name="msgPassword"
                            ng-model="vm.initializeForm.msg.password" placeholder="8 or more characters" ng-disabled="vm.systemSettings.msg.isInitialized || vm.initializing"/>
                          </div>
                        </td>
                        <td>
                        </td>
                      </tr>
                      <tr ng-if="vm.initializeForm.msg.initType === 'new'">
                        <td colspan="3">
                          <span>IP address where you would like RabbitMQ installed:</span>
                        </td>
                        <td colspan="3">
                          <div ng-class="vm.validateIP(vm.initializeForm.msg.address)">
                            <input type="text" class="form-control input-sm" name="msgAddress" placeholder="0.0.0.0" ng-disabled="vm.systemSettings.msg.isInitialized || vm.initializing"
                            ng-model="vm.initializeForm.msg.address"/>
                          </div>
                        </td>
                        <td>
                        </td>
                      </tr>
                      <tr ng-if="vm.initializeForm.msg.initType === 'new'">
                        <td colspan="7">
                          Please run this command on your node to authorize SSH access:
                        </td>
                      </tr>
                      <tr ng-if="vm.initializeForm.msg.initType === 'new'">
                        <td colspan="6">
                          <div class="ss-action"></div>
                          <div class="ship-console" style="word-break: break-all;">
                            {{vm.initializeForm.sshCommand}}
                          </div>
                        </td>
                      </tr>
                      <tr ng-if="vm.initializeForm.msg.initType === 'new'">
                        <td colspan="6" ng-class="vm.initializeForm.msg.confirmCommand ? '' : 'has-error'">
                          <div class="checkbox">
                            <input type="checkbox" ng-model="vm.initializeForm.msg.confirmCommand"/>
                            Click here once you have run the above command on your node
                          </div>
                        </td>
                        <td>
                        </td>
                      </tr>
                      <tr ng-if="vm.initializeForm.msg.initType === 'existing'">
                        <td colspan="3">
                          <span>IP address of your existing RabbitMQ installation:</span>
                        </td>
                        <td colspan="3">
                          <div ng-class="vm.validateIP(vm.initializeForm.msg.address)">
                            <input type="text" class="form-control input-sm" name="msgAddress" placeholder="0.0.0.0" ng-disabled="vm.systemSettings.msg.isInitialized || vm.initializing"
                            ng-model="vm.initializeForm.msg.address"/>
                          </div>
                        </td>
                        <td>
                        </td>
                      </tr>
                      <tr ng-if="vm.initializeForm.msg.initType === 'existing'">
                        <td colspan="3">
                          <span>Protocol used to connect to your RabbitMQ installation:</span>
                        </td>
                        <td colspan="3">
                          <div>
                            <span>
                              <input type="radio" ng-model="vm.initializeForm.msg.isSecure" ng-value=false ng-disabled="vm.systemSettings.msg.isInitialized || vm.initializing">
                              amqp
                            </span>
                            <span>
                              <input type="radio" ng-model="vm.initializeForm.msg.isSecure" ng-disabled="vm.systemSettings.msg.isInitialized || vm.initializing" ng-value=true>
                              amqps
                            </span>
                          </div>
                        </td>
                        <td>
                        </td>
                      </tr>
                      <!-- State -->
                      <tr class="active">
                        <td ng-if="vm.initializeForm.state.initType === 'admiral'" rowspan="2">
                          <b>State:</b>
                        </td>
                        <td ng-if="vm.initializeForm.state.initType === 'new'" rowspan="6" style="width: 12.5%;">
                          <b>State:</b>
                        </td>
                        <td ng-if="vm.initializeForm.state.initType === 'existing'" rowspan="3" style="width: 12.5%;">
                          <b>State:</b>
                        </td>
                        <td colspan="5">
                          Install Location:
                          <span>
                            <input type="radio" ng-model="vm.initializeForm.state.initType" ng-disabled="vm.systemSettings.state.isInitialized || vm.initializing" value="admiral">
                            This Node
                          </span>
                          <span>
                            <input type="radio" ng-model="vm.initializeForm.state.initType" ng-disabled="vm.systemSettings.state.isInitialized || vm.initializing" value="new">
                            New Node
                          </span>
                          <span>
                            <input type="radio" ng-model="vm.initializeForm.state.initType" value="existing" ng-disabled="vm.systemSettings.state.isInitialized || vm.initializing">
                            Existing
                          </span>
                        </td>
                        <td>
                          <button class="btn btn-sm btn-default" ng-click="vm.showConfigModal('state')" ng-disabled="!vm.systemSettings.db.isInitialized">config</button>
                          <button class="btn btn-sm btn-default" ng-click="vm.showLogModal('state')" ng-disabled="!vm.systemSettings.state.isProcessing && !vm.systemSettings.state.isFailed && !vm.systemSettings.state.isInitialized">logs</button>
                        </td>
                        <td style="width: 12.5%;" class="text-center">
                          <span ng-if="vm.systemSettings.state.isProcessing">initializing...</span>
                          <span ng-if="!vm.systemSettings.state.isProcessing && !vm.systemSettings.state.isFailed">
                            {{vm.systemSettings.state.isInitialized ? 'initialized' : 'not initialized'}}
                          </span>
                          <span ng-if="!vm.systemSettings.state.isProcessing && vm.systemSettings.state.isFailed">failed &#x26a0;</span>
                        </td>
                      </tr>
                      <tr class="active">
                        <td colspan="3">
                          <span ng-if="vm.initializeForm.state.initType !== 'existing'">Choose a password for State:</span>
                          <span ng-if="vm.initializeForm.state.initType === 'existing'">Password for State root user:</span>
                        </td>
                        <td colspan="3">
                          <div ng-class="vm.validatePassword(vm.initializeForm.state.rootPassword)">
                            <input type="text" class="form-control input-sm" name="statePassword"
                            ng-model="vm.initializeForm.state.rootPassword" placeholder="8 or more characters" ng-disabled="vm.systemSettings.state.isInitialized || vm.initializing"/>
                          </div>
                        </td>
                        <td>
                        </td>
                      </tr>
                      <tr class="active" ng-if="vm.initializeForm.state.initType === 'new'">
                        <td colspan="3">
                          <span>IP address for your new State installation:</span>
                        </td>
                        <td colspan="3">
                          <div ng-class="vm.validateIP(vm.initializeForm.state.address)">
                            <input type="text" class="form-control input-sm" name="stateAddress" placeholder="0.0.0.0" ng-disabled="vm.systemSettings.state.isInitialized || vm.initializing"
                            ng-model="vm.initializeForm.state.address"/>
                          </div>
                        </td>
                        <td>
                        </td>
                      </tr>
                      <tr class="active" ng-if="vm.initializeForm.state.initType === 'new'">
                        <td colspan="7">
                          Please run this command on your node to authorize SSH access:
                        </td>
                      </tr>
                      <tr class="active" ng-if="vm.initializeForm.state.initType === 'new'">
                        <td colspan="6">
                          <div class="ss-action"></div>
                          <div class="ship-console" style="word-break: break-all;">
                            {{vm.initializeForm.sshCommand}}
                          </div>
                        </td>
                        <td>
                        </td>
                      </tr>
                      <tr class="active" ng-if="vm.initializeForm.state.initType === 'new'">
                        <td colspan="6" ng-class="vm.initializeForm.state.confirmCommand ? '' : 'has-error'">
                          <div class="checkbox">
                            <input type="checkbox" ng-model="vm.initializeForm.state.confirmCommand"/>
                            Click here once you have run the above command on your node
                          </div>
                        </td>
                        <td>
                        </td>
                      </tr>
                      <tr class="active" ng-if="vm.initializeForm.state.initType === 'existing'">
                        <td colspan="3">
                          <span>IP address for your existing State installation:</span>
                        </td>
                        <td colspan="3">
                          <div ng-class="vm.validateIP(vm.initializeForm.state.address)">
                            <input type="text" class="form-control input-sm" name="stateAddress" placeholder="0.0.0.0" ng-disabled="vm.systemSettings.state.isInitialized || vm.initializing"
                            ng-model="vm.initializeForm.state.address"/>
                          </div>
                        </td>
                        <td>
                        </td>
                      </tr>
                      <!-- Redis -->
                      <tr>
                        <td ng-if="vm.initializeForm.redis.initType === 'admiral'">
                          <b>Redis:</b>
                        </td>
                        <td ng-if="vm.initializeForm.redis.initType === 'new'" rowspan="5" style="width: 12.5%;">
                          <b>Redis:</b>
                        </td>
                        <td ng-if="vm.initializeForm.redis.initType === 'existing'" rowspan="2" style="width: 12.5%;">
                          <b>Redis:</b>
                        </td>
                        <td colspan="5">
                          Install Location:
                          <span>
                            <input type="radio" ng-model="vm.initializeForm.redis.initType" ng-disabled="vm.systemSettings.redis.isInitialized || vm.initializing" value="admiral">
                            This Node
                          </span>
                          <span>
                            <input type="radio" ng-model="vm.initializeForm.redis.initType" value="new" ng-disabled="vm.systemSettings.redis.isInitialized || vm.initializing">
                            New Node
                          </span>
                          <span>
                            <input type="radio" ng-model="vm.initializeForm.redis.initType" value="existing" ng-disabled="vm.systemSettings.redis.isInitialized || vm.initializing">
                            Existing
                          </span>
                        </td>
                        <td>
                          <button class="btn btn-sm btn-default" ng-click="vm.showConfigModal('redis')" ng-disabled="!vm.systemSettings.db.isInitialized">config</button>
                          <button class="btn btn-sm btn-default" ng-click="vm.showLogModal('redis')" ng-disabled="!vm.systemSettings.redis.isProcessing && !vm.systemSettings.redis.isFailed && !vm.systemSettings.redis.isInitialized">logs</button>
                        </td>
                        <td style="width: 12.5%;" class="text-center">
                          <span ng-if="vm.systemSettings.redis.isProcessing">initializing...</span>
                          <span ng-if="!vm.systemSettings.redis.isProcessing && !vm.systemSettings.redis.isFailed">
                            {{vm.systemSettings.redis.isInitialized ? 'initialized' : 'not initialized'}}
                          </span>
                          <span ng-if="!vm.systemSettings.redis.isProcessing && vm.systemSettings.redis.isFailed">failed &#x26a0;</span>
                        </td>
                      </tr>
                      <tr ng-if="vm.initializeForm.redis.initType === 'new'">
                        <td colspan="3">
                          <span>IP address for your new Redis installation:</span>
                        </td>
                        <td colspan="3">
                          <div ng-class="vm.validateIP(vm.initializeForm.redis.address)">
                            <input type="text" class="form-control input-sm" name="redisAddress" placeholder="0.0.0.0" ng-disabled="vm.systemSettings.redis.isInitialized || vm.initializing"
                            ng-model="vm.initializeForm.redis.address"/>
                          </div>
                        </td>
                        <td>
                        </td>
                      </tr>
                      <tr ng-if="vm.initializeForm.redis.initType === 'new'">
                        <td colspan="7">
                          Please run this command on your node to authorize SSH access:
                        </td>
                      </tr>
                      <tr ng-if="vm.initializeForm.redis.initType === 'new'">
                        <td colspan="6">
                          <div class="ss-action"></div>
                          <div class="ship-console" style="word-break: break-all;">
                            {{vm.initializeForm.sshCommand}}
                          </div>
                        </td>
                        <td>
                        </td>
                      </tr>
                      <tr ng-if="vm.initializeForm.redis.initType === 'new'">
                        <td colspan="6" ng-class="vm.initializeForm.redis.confirmCommand ? '' : 'has-error'">
                          <div class="checkbox">
                            <input type="checkbox" ng-model="vm.initializeForm.redis.confirmCommand"/>
                            Click here once you have run the above command on your node
                          </div>
                        </td>
                        <td>
                        </td>
                      </tr>
                      <tr ng-if="vm.initializeForm.redis.initType === 'existing'">
                        <td colspan="3">
                          <span>IP address of your existing Redis installation:</span>
                        </td>
                        <td colspan="3">
                          <div ng-class="vm.validateIP(vm.initializeForm.redis.address)">
                            <input type="text" class="form-control input-sm" name="redisAddress" placeholder="0.0.0.0" ng-disabled="vm.systemSettings.redis.isInitialized || vm.initializing"
                            ng-model="vm.initializeForm.redis.address"/>
                          </div>
                        </td>
                        <td>
                        </td>
                      </tr>
                      <!-- Swarm -->
                      <tr class="active">
                        <td ng-if="vm.initializeForm.workers.initType === 'admiral'">
                          <b>Swarm:</b>
                        </td>
                        <td ng-if="vm.initializeForm.workers.initType === 'new'" rowspan="9">
                          <b>Swarm:</b>
                        </td>
                        <td colspan="5" style="width: 45%">
                          Worker Install Location:
                          <span>
                            <input type="radio" ng-model="vm.initializeForm.workers.initType" ng-disabled="((vm.initializeForm.workers.workers[0].isInitialized || vm.initializeForm.workers.workers[0].isFailed) && vm.initializeForm.workers.workers[0].address !== vm.admiralEnv.ADMIRAL_IP) || (vm.admiralEnv.IS_SERVER && vm.admiralEnv.DB_IP === vm.admiralEnv.ADMIRAL_IP) || vm.initializing" value="admiral">
                            This Node
                          </span>
                          <span>
                            <input type="radio" ng-model="vm.initializeForm.workers.initType" ng-disabled="((vm.initializeForm.workers.workers[0].isInitialized || vm.initializeForm.workers.workers[0].isFailed) && vm.initializeForm.workers.workers[0].address !== vm.admiralEnv.ADMIRAL_IP) || (vm.admiralEnv.IS_SERVER && vm.admiralEnv.DB_IP === vm.admiralEnv.ADMIRAL_IP) || vm.initializing" value="new">
                            New Node(s)
                          </span>
                        </td>
                        <td ng-if="vm.initializeForm.workers.initType === 'admiral'">
                          <button class="btn btn-sm btn-default" ng-click="vm.showConfigModal('master')" ng-disabled="!vm.systemSettings.db.isInitialized">config</button>
                          <button class="btn btn-sm btn-default" ng-click="vm.showLogModal('master')" ng-disabled="!vm.systemSettings.master.isProcessing && !vm.systemSettings.master.isFailed && !vm.systemSettings.master.isInitialized">logs</button>
                        </td>
                        <td ng-if="vm.initializeForm.workers.initType === 'admiral'" style="width: 12.5%;" class="text-center">
                          <span ng-if="vm.systemSettings.master.isProcessing">initializing...</span>
                          <span ng-if="!vm.systemSettings.master.isProcessing && !vm.systemSettings.master.isFailed">
                            {{vm.systemSettings.master.isInitialized ? 'initialized' : 'not initialized'}}
                          </span>
                          <span ng-if="!vm.systemSettings.master.isProcessing && vm.systemSettings.master.isFailed">failed &#x26a0;</span>
                        </td>
                        <td ng-if="vm.initializeForm.workers.initType === 'new'">
                        </td>
                        <td ng-if="vm.initializeForm.workers.initType === 'new'" style="width: 12.5%">
                        </td>
                      </tr>
                      <tr ng-if="vm.initializeForm.workers.initType === 'new'" class="active">
                        <td colspan="7">
                          <b>
                            Swarm master
                          </b>
                        </td>
                      </tr>
                      <tr ng-if="vm.initializeForm.workers.initType === 'new'" class="active">
                        <td>
                        </td>
                        <td colspan="1">
                          IP: {{vm.initializeForm.master.address || vm.admiralEnv.ADMIRAL_IP}}
                        </td>
                        <td colspan="1">
                          Port: {{vm.initializeForm.master.port || 2377}}
                        </td>
                        <td colspan="2">
                        </td>
                        <td>
                          <button class="btn btn-sm btn-default" ng-click="vm.showConfigModal('master')" ng-disabled="!vm.systemSettings.db.isInitialized">config</button>
                          <button class="btn btn-sm btn-default" ng-click="vm.showLogModal('master')" ng-disabled="!vm.systemSettings.master.isProcessing && !vm.systemSettings.master.isFailed && !vm.systemSettings.master.isInitialized">logs</button>
                        </td>
                        <td style="width: 12.5%;" class="text-center">
                          <span ng-if="vm.systemSettings.master.isProcessing">initializing...</span>
                          <span ng-if="!vm.systemSettings.master.isProcessing && !vm.systemSettings.master.isFailed">
                            {{vm.systemSettings.master.isInitialized ? 'initialized' : 'not initialized'}}
                          </span>
                          <span ng-if="!vm.systemSettings.master.isProcessing && vm.systemSettings.master.isFailed">failed &#x26a0;</span>
                        </td>
                      </tr>
                      <tr ng-if="vm.initializeForm.workers.initType === 'new'" class="active">
                        <td colspan="7">
                          <b>
                            Swarm workers
                          </b>
                        </td>
                      </tr>
                      <tr ng-if="vm.initializeForm.workers.initType === 'new'" class="active">
                        <td>
                        </td>
                        <td colspan="2">
                          <i>
                            Worker names must be unique
                          </i>
                        </td>
                        <td colspan="2">
                        </td>
                        <td>
                          <button class="btn btn-sm btn-default" ng-click="vm.showWorkersLogModal('workers')" ng-disabled="!vm.initializeForm.workers.enableLogsButton">worker init logs</button>
                        </td>
                        <td style="width: 12.5%;" class="text-center">
                        </td>
                      </tr>
                      <tr ng-if="vm.initializeForm.workers.initType === 'new'" class="active">
                        <td>
                        </td>
                        <td colspan="6">
                          <div class="row">
                            <div class="col-md-2">
                              Add Worker:
                            </div>
                            <div class="col-md-1 text-right">
                              Name:
                            </div>
                            <div class="col-md-3" ng-class="!vm.initializeForm.workers.workers.length && !vm.initializeForm.workers.newWorker.name.length ? 'has-error' : ''">
                              <input type="text" class="form-control input-sm" name="workerName" placeholder="worker name" ng-disabled="vm.initializing"
                              ng-model="vm.initializeForm.workers.newWorker.name"/>
                            </div>
                            <div class="col-md-1 text-right">
                              IP:
                            </div>
                            <div class="col-md-2" ng-class="vm.validateWorkerAddress(vm.initializeForm.workers.newWorker.address)">
                              <input type="text" class="form-control input-sm" name="workerAddress" placeholder="0.0.0.0" ng-disabled="vm.initializing"
                              ng-model="vm.initializeForm.workers.newWorker.address"/>
                            </div>
                            <div class="col-md-1">
                              <button class="btn btn-sm btn-default" ng-click="vm.addWorker(vm.initializeForm.workers.newWorker)">Add</button>
                            </div>
                            <div class="col-md-2">
                            </div>
                          </div>
                          <div class="row" ng-repeat="worker in vm.initializeForm.workers.workers">
                            <div class="col-md-2">
                              <span ng-if="$first">
                                Workers:
                              </span>
                            </div>
                            <div class="col-md-1 text-right">
                              Name:
                            </div>
                            <div class="col-md-3">
                              {{worker.name}}
                            </div>
                            <div class="col-md-1 text-right">
                              IP:
                            </div>
                            <div class="col-md-2">
                              {{worker.address}}
                            </div>
                            <div class="col-md-1">
                              <button class="btn btn-sm btn-default" ng-click="vm.removeWorker(worker)">
                                Remove
                              </button>
                            </div>
                            <div class="col-md-2 text-center">
                              <span ng-if="worker.isProcessing">initializing...</span>
                              <span ng-if="!worker.isProcessing && !worker.isFailed">
                                {{worker.isInitialized ? 'initialized' : 'not initialized'}}
                              </span>
                              <span ng-if="!worker.isProcessing && worker.isFailed">failed &#x26a0;</span>
                            </div>
                          </div>
                        </td>
                      </tr>
                      <tr ng-if="vm.initializeForm.workers.initType === 'new'" class="active">
                        <td>
                        </td>
                        <td colspan="5">
                          Please run this command on {{vm.initializeForm.workers.workers.length > 1 ? 'every' : 'your'}} node to authorize SSH access:
                        </td>
                        <td>
                        </td>
                      </tr>
                      <tr ng-if="vm.initializeForm.workers.initType === 'new'" class="active">
                        <td>
                        </td>
                        <td colspan="5">
                          <div class="ss-action"></div>
                          <div class="ship-console" style="word-break: break-all;">
                            {{vm.initializeForm.sshCommand}}
                          </div>
                        </td>
                        <td>
                        </td>
                      </tr>
                      <tr ng-if="vm.initializeForm.workers.initType === 'new'" class="active">
                        <td>
                        </td>
                        <td colspan="5" ng-class="vm.initializeForm.workers.confirmCommand ? '' : 'has-error'">
                          <div class="checkbox">
                            <input type="checkbox" ng-model="vm.initializeForm.workers.confirmCommand"/>
                            Click here once you have run the above command on
                            {{vm.initializeForm.workers.workers.length > 1 ? 'every' : 'your'}} worker node
                          </div>
                        </td>
                        <td>
                        </td>
                      </tr>
                      <!-- Initialize button -->
                      <tr>
                        <td colspan=8 class="text-right">
                          <button class="btn btn-md btn-primary" type="submit" ng-click="vm.initialize()"
                            ng-disabled="vm.initializing || (vm.initializeForm.secrets.initType === 'new' && !vm.initializeForm.secrets.confirmCommand) || (vm.initializeForm.msg.initType === 'new' && !vm.initializeForm.msg.confirmCommand) || (vm.initializeForm.state.initType === 'new' && !vm.initializeForm.state.confirmCommand) || (vm.initializeForm.redis.initType === 'new' && !vm.initializeForm.redis.confirmCommand) || (vm.initializeForm.workers.initType === 'new' && !vm.initializeForm.workers.confirmCommand)">
                            <div ng-if="vm.initializing">
                              Initializing...
                            </div>
                            <div ng-if="!vm.initializing">
                              Initialize
                            </div>
                          </button>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="panel panel-default" ng-if="vm.upgrading || (vm.initialized && vm.systemSettings.releaseVersion !== vm.admiralEnv.RELEASE)">
          <div class="panel-heading">
            <h3 class="panel-title">
              <a data-toggle="collapse" href="#upgradepanel">2. Upgrade</a>
            </h3>
          </div>
          <div id="upgradepanel" class="panel-collapse collapse">
            <div class="panel-body">
              <div ng-if="!vm.isLoaded">
                Loading...
              </div>
              <div class="col-md-offset-1 col-md-10" ng-if="vm.isLoaded">
                <div>
                  Current version: {{vm.systemSettings.releaseVersion}}
                </div>
                <div>
                  Available version: {{vm.admiralEnv.RELEASE}}
                </div>
                <div class="text-right">
                  <button class="btn btn-md btn-primary" type="submit" ng-disabled="vm.upgrading" ng-click="vm.upgrade()">
                    <div ng-if="vm.upgrading">
                      Upgrading...
                    </div>
                    <div ng-if="!vm.upgrading">
                      Upgrade
                    </div>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">
              <a data-toggle="collapse" href="#installpanel">
                {{(vm.initialized && vm.systemSettings.releaseVersion !== vm.admiralEnv.RELEASE) ? '3.' : '2.'}} Configure & Install
              </a>
            </h3>
          </div>
          <div id="installpanel" class="panel-collapse collapse">
            <div class="panel-body">
              <div ng-if="!vm.isLoaded">
                Loading...
              </div>
              <div ng-if="!vm.initialized">
                Please initialize first.
              </div>
              <div ng-if="vm.isLoaded && vm.initialized">
                <div class="row">
                  <div class="col-md-offset-1 col-md-10">
                  <!-- Service Addresses -->
                    <div class="row">
                      <div class="col-md-12">
                        &nbsp;
                        <h4 class="panel-title">
                          Service Addresses
                        </h4>
                      </div>
                      <!-- API -->
                      <div class="col-md-offset-1 col-md-11">
                        <div>&nbsp;</div>
                        <div class="row">
                          <div class="col-md-12">
                            <b>API</b>
                          </div>
                        </div>
                      </div>
                      <div class="col-md-offset-2 col-md-10">
                        <div class="row">
                          <div class="col-md-4">
                            URL
                          </div>
                          <div class="col-md-8">
                            <input type="text" class="form-control input-sm" name="apiUrl"
                              ng-model="vm.installForm.api.url.data.url" ng-disabled="vm.installing || vm.saving"/>
                              <span ng-if="vm.systemSettings.workers.length > 1">
                                This field requires a LoadBalanced IP/DNS
                              </span>
                          </div>
                        </div>
                      </div>
                      <!-- Internal API -->
                      <div class="col-md-offset-1 col-md-11">
                        <div>&nbsp;</div>
                        <div class="row">
                          <div class="col-md-12">
                            <div class="checkbox">
                              <input type="checkbox" ng-model="vm.installForm.internalAPI.url.isEnabled" ng-disabled="vm.installing || vm.saving"/>
                              <b> Dedicated Internal API (optional) </b>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="col-md-offset-2 col-md-10" ng-if="vm.installForm.internalAPI.url.isEnabled">
                        <div class="row">
                          <div class="col-md-4">
                            Internal API URL
                          </div>
                          <div class="col-md-8">
                            <input type="text" class="form-control input-sm" name="internalAPIUrl"
                              ng-model="vm.installForm.internalAPI.url.data.url" ng-disabled="vm.installing || vm.saving"/>
                          </div>
                        </div>
                      </div>
                      <!-- Console API -->
                      <div class="col-md-offset-1 col-md-11">
                        <div>&nbsp;</div>
                        <div class="row">
                          <div class="col-md-12">
                            <div class="checkbox">
                              <input type="checkbox" ng-model="vm.installForm.consoleAPI.url.isEnabled" ng-disabled="vm.installing || vm.saving"/>
                              <b> Dedicated Console API (optional) </b>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="col-md-offset-2 col-md-10" ng-if="vm.installForm.consoleAPI.url.isEnabled">
                        <div class="row">
                          <div class="col-md-4">
                            Console API URL
                          </div>
                          <div class="col-md-8">
                            <input type="text" class="form-control input-sm" name="consoleAPIUrl"
                              ng-model="vm.installForm.consoleAPI.url.data.url" ng-disabled="vm.installing || vm.saving"/>
                          </div>
                        </div>
                      </div>
                      <!-- State -->
                      <div class="col-md-offset-1 col-md-11">
                        <div>&nbsp;</div>
                        <div class="row">
                          <div class="col-md-12">
                            <b>State</b>
                          </div>
                        </div>
                      </div>
                      <div class="col-md-offset-2 col-md-10">
                        <div class="row">
                          <div class="col-md-4">
                            Password
                          </div>
                          <div class="col-md-8">
                            <input type="text" class="form-control input-sm" name="statePassword"
                              ng-model="vm.installForm.state.gitlabCreds.data.password" ng-disabled="true"/>
                          </div>
                          <div class="col-md-4">
                            Username
                          </div>
                          <div class="col-md-8">
                            <input type="text" class="form-control input-sm" name="stateURL"
                              ng-model="vm.installForm.state.gitlabCreds.data.username" ng-disabled="true"/>
                          </div>
                          <div class="col-md-4">
                            URL
                          </div>
                          <div class="col-md-8">
                            <input type="text" class="form-control input-sm" name="stateURL"
                              ng-model="vm.installForm.state.gitlabCreds.data.url" ng-disabled="vm.installing || vm.saving"/>
                          </div>
                        </div>
                      </div>
                      <!-- mktg -->
                      <div class="col-md-offset-1 col-md-11" ng-if="!vm.admiralEnv.IS_SERVER">
                        <div>&nbsp;</div>
                        <div class="row">
                          <div class="col-md-12">
                            <b>mktg</b>
                          </div>
                        </div>
                      </div>
                      <div class="col-md-offset-2 col-md-10" ng-if="!vm.admiralEnv.IS_SERVER">
                        <div class="row">
                          <div class="col-md-4">
                            URL
                          </div>
                          <div class="col-md-8">
                            <input type="text" class="form-control input-sm" name="mktgUrl"
                              ng-model="vm.installForm.mktg.url.data.url" ng-disabled="vm.installing || vm.saving"/>
                          </div>
                        </div>
                      </div>
                      <!-- RabbitMQ -->
                      <div class="col-md-offset-1 col-md-11">
                        <div>&nbsp;</div>
                        <div class="row">
                          <div class="col-md-12">
                            <b>RabbitMQ</b>
                          </div>
                        </div>
                      </div>
                      <div class="col-md-offset-2 col-md-10">
                        <div class="row">
                          <div class="col-md-4">
                            amqp URL
                          </div>
                          <div class="col-md-8">
                            <input type="text" class="form-control input-sm" name="msgAmqpUrl"
                              ng-model="vm.installForm.msg.rabbitmqCreds.data.amqpUrl" ng-disabled="vm.installing || vm.saving"/>
                          </div>
                          <div class="col-md-4">
                            amqp Root Url
                          </div>
                          <div class="col-md-8">
                            <input type="text" class="form-control input-sm" name="msgAmqpUrlRoot"
                              ng-model="vm.installForm.msg.rabbitmqCreds.data.amqpUrlRoot" ng-disabled="vm.installing || vm.saving"/>
                          </div>
                          <div class="col-md-4">
                            amqp Admin URL
                          </div>
                          <div class="col-md-8">
                            <input type="text" class="form-control input-sm" name="msgAmqpUrlAdmin"
                              ng-model="vm.installForm.msg.rabbitmqCreds.data.amqpUrlAdmin" ng-disabled="vm.installing || vm.saving"/>
                          </div>
                          <div class="col-md-4">
                            amqp Default Exchange
                          </div>
                          <div class="col-md-8">
                            <input type="text" class="form-control input-sm" name="msgAmqpDefaultExchange"
                              ng-model="vm.installForm.msg.rabbitmqCreds.data.amqpDefaultExchange" ng-disabled="true"/>
                          </div>
                          <div class="col-md-4">
                            Root Queue List
                          </div>
                          <div class="col-md-8">
                            <input type="text" class="form-control input-sm" name="msgRootQueueList"
                              ng-model="vm.installForm.msg.rabbitmqCreds.data.rootQueueList" ng-disabled="vm.installing || vm.saving"/>
                          </div>
                        </div>
                      </div>
                      <!-- Redis -->
                      <div class="col-md-offset-1 col-md-11">
                        <div>&nbsp;</div>
                        <div class="row">
                          <div class="col-md-12">
                            <b>Redis</b>
                          </div>
                        </div>
                      </div>
                      <div class="col-md-offset-2 col-md-10">
                        <div class="row">
                          <div class="col-md-4">
                            URL
                          </div>
                          <div class="col-md-8">
                            <input type="text" class="form-control input-sm" name="redisUrl"
                              ng-model="vm.installForm.redis.url.data.url" ng-disabled="vm.installing || vm.saving"/>
                          </div>
                        </div>
                      </div>
                      <!-- www -->
                      <div class="col-md-offset-1 col-md-11">
                        <div>&nbsp;</div>
                        <div class="row">
                          <div class="col-md-12">
                            <b>Shippable UI</b>
                          </div>
                        </div>
                      </div>
                      <div class="col-md-offset-2 col-md-10">
                        <div class="row">
                          <div class="col-md-4">
                            URL
                          </div>
                          <div class="col-md-8">
                            <input type="text" name="wwwUrl"
                              class="col-md-12 form-control input-sm"
                              ng-model="vm.installForm.www.url.data.url"
                              ng-disabled="vm.installing || vm.saving"/>
                              <span ng-if="vm.systemSettings.workers.length > 1">
                                This field requires a LoadBalanced IP/DNS
                              </span>
                            <div ng-if="vm.requireRestart">
                              Click
                              <a href="{{vm.installForm.www.url.data.url}}"
                                target="_blank">here</a>
                              to login
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <!-- Authorization Providers -->
                    <div class="row">
                      <div class="col-md-12">
                        &nbsp;
                        <h4 class="panel-title">
                          Authorization and Source Control Management (SCM) Providers
                        </h4>
                      </div>
                      <div class="col-md-offset-1 col-md-11">
                        <div class="row has-error" ng-if="!vm.installForm.auth.bitbucketKeys.isEnabled && !vm.installForm.auth.bitbucketServerKeys.isEnabled && !vm.installForm.auth.githubKeys.isEnabled && !vm.installForm.auth.githubEnterpriseKeys.isEnabled && !vm.installForm.auth.gitlabKeys.isEnabled">
                          <span class="help-block">
                            You must configure at least one authorization provider.
                          </span>
                        </div>
                      </div>
                      <div class="col-md-offset-1 col-md-11">
                        <div class="row">
                          <div class="col-md-1">
                            <div class="row">
                              <div class="col-md-6">
                                Auth
                              </div>
                              <div class="col-md-6">
                                SCM
                              </div>
                            </div>
                          </div>
                          <div class="col-sm-1 col-md-11">
                          </div>
                        </div>
                      </div>
                      <!-- Bitbucket -->
                      <div class="col-md-offset-1 col-md-11">
                        <div class="row">
                          <div class="col-md-1">
                            <div class="row">
                              <div class="col-md-6">
                                <div class="checkbox">
                                  <label>
                                    <input type="checkbox" ng-model="vm.installForm.auth.bitbucketKeys.isEnabled" ng-change="vm.toggleAuthProvider('bitbucket')"/>
                                  </label>
                                </div>
                              </div>
                              <div class="col-md-6">
                                <div class="checkbox">
                                  <label>
                                    <input type="checkbox" ng-model="vm.installForm.scm.bitbucket.isEnabled" ng-disabled="vm.installForm.auth.bitbucketKeys.isEnabled"/>
                                  </label>
                                </div>
                              </div>
                            </div>
                          </div>
                          <div class="col-md-11">
                            <div class="checkbox" style="padding-left: 5px;">
                              Bitbucket
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="col-md-offset-2 col-md-10" ng-if="vm.installForm.auth.bitbucketKeys.isEnabled">
                        <div class="row">
                          <div class="col-md-4">
                            Client ID
                          </div>
                          <div class="col-md-8">
                            <input type="text" class="form-control input-sm" name="bitbucketClientId"
                              ng-model="vm.installForm.auth.bitbucketKeys.data.clientId" ng-disabled="vm.installing || vm.saving"/>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-4">
                            Client Secret
                          </div>
                          <div class="col-md-8">
                            <input type="text" class="form-control input-sm" name="bitbucketClientSecret"
                              ng-model="vm.installForm.auth.bitbucketKeys.data.clientSecret" ng-disabled="vm.installing || vm.saving"/>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-4">
                            URL
                          </div>
                          <div class="col-md-8">
                            <input type="text" class="form-control input-sm" name="bitbucketUrl"
                              ng-model="vm.installForm.auth.bitbucketKeys.data.url" ng-disabled="true"/>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-4">
                            WWW URL
                          </div>
                          <div class="col-md-8">
                            <input type="text" class="form-control input-sm" name="bitbucketWWWUrl"
                              ng-model="vm.installForm.www.url.data.url" ng-disabled="true"/>
                          </div>
                        </div>
                        <div class="row" ng-if="vm.installForm.auth.bitbucketKeys.callbackUrl">
                          <div class="col-md-4">
                            Callback URL
                          </div>
                          <div class="col-md-8">
                            <input type="text" class="form-control input-sm" name="bitbucketCallbackUrl"
                              ng-model="vm.installForm.auth.bitbucketKeys.callbackUrl" readonly/>
                          </div>
                        </div>
                      </div>
                        <!-- Bitbucket Server -->
                      <div class="col-md-offset-1 col-md-11">
                        <div class="row">
                          <div class="col-md-1">
                            <div class="row">
                              <div class="col-md-6">
                                <div class="checkbox">
                                  <label>
                                    <input type="checkbox" ng-model="vm.installForm.auth.bitbucketServerKeys.isEnabled" ng-change="vm.toggleAuthProvider('bitbucketServer')"/>
                                  </label>
                                </div>
                              </div>
                              <div class="col-md-6">
                                <div class="checkbox">
                                  <label>
                                    <input type="checkbox" ng-model="vm.installForm.scm.bitbucketServer.isEnabled" ng-disabled="vm.installForm.auth.bitbucketServerKeys.isEnabled"/>
                                  </label>
                                </div>
                              </div>
                            </div>
                          </div>
                          <div class="col-md-11">
                            <div class="checkbox" style="padding-left: 5px;">
                              Bitbucket Server
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="col-md-offset-2 col-md-10" ng-if="vm.installForm.auth.bitbucketServerKeys.isEnabled">
                        <div class="row">
                          <div class="col-md-4">
                            Client ID
                          </div>
                          <div class="col-md-8">
                            <input type="text" class="form-control input-sm" name="bitbucketServerClientId"
                              ng-model="vm.installForm.auth.bitbucketServerKeys.data.clientId" ng-disabled="vm.installing || vm.saving"/>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-4">
                            Client Secret
                          </div>
                          <div class="col-md-8">
                            <textarea class="form-control input-sm" rows="3" name="bitbucketServerClientSecret" ng-model="vm.installForm.auth.bitbucketServerKeys.data.clientSecret" ng-disabled="vm.installing || vm.saving" placeholder="-----BEGIN ENCRYPTED PRIVATE KEY----- MIIFDjBABgkqhkiG9w0BBQ0wMzAbBgkqhkiG9w0BBQwwDgQIS2qgprFqPxECAggA MBQGCCqGSIb3DQMHBAgD1kGN4ZslJgSCBMi1xk9jhlPxP3FyaMIUq8QmckXCs3Sa 9g73NQbtqZwI+9X5OhpSg/2ALxlCCjbqvzgSu8gfFZ4yo+Xd8VucZDmDSpzZGDod A .... MANY LINES LIKE THAT .... .... MANY LINES LIKE THAT ....  X0R+meOaudPTBxoSgCCM51poFgaqt4l6VlTN4FRpj+c/WZeoMM/BVXO+nayuIMyH blK948UAda/bWVmZjXfY4Tztah0CuqlAldOQBzu8TwE7WDwo5S7lo5u0EXEoqCCq H0ga/iLNvWYexG7FHLRiq5hTj0g9mUPEbeTXuPtOkTEb/0ckVE2iZH9l7g5edmUZ GEs= -----END ENCRYPTED PRIVATE KEY----- -----BEGIN CERTIFICATE----- MIIDXTCCAkWgAwIBAgIJAJC1HiIAZAiIMA0GCSqGSIb3DQEBBQUAMEUxCzAJBgNV BAYTAkFVMRMwEQYDVQQIDApTb21lLVN0YXRlMSEwHwYDVQQKDBhJbnRlcm5ldCBX aWRnaXRzIFB0eSBMdGQwHhcNMTExMjMxMDg1OTQ0WhcNMTIxMjMwMDg1OTQ0WjBF A .... MANY LINES LIKE THAT .... .... MANY LINES LIKE THAT ....  JjyzfN746vaInA1KxYEeI1Rx5KXY8zIdj6a7hhphpj2E04LDdw7r495dv3UgEgpR C3Fayua4DRHyZOLmlvQ6tIChY0ClXXuefbmVSDeUHwc8YufRAERp2GfQnL2JlPUL B7xxt8BVc69rLeHV15A0qyx77CLSj3tCx2IUXVqRs5mlSbq094NBxsauYcm0A6Jq vA== -----END CERTIFICATE-----">
                            </textarea>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-4">
                            URL
                          </div>
                          <div class="col-md-8">
                            <input type="text" class="form-control input-sm" name="bitbucketServerUrl"
                              ng-model="vm.installForm.auth.bitbucketServerKeys.data.url" ng-disabled="vm.installing || vm.saving"/>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-4">
                            WWW URL
                          </div>
                          <div class="col-md-8">
                            <input type="text" class="form-control input-sm" name="bitbucketServerWWWUrl"
                              ng-model="vm.installForm.www.url.data.url" ng-disabled="true"/>
                          </div>
                        </div>
                        <div class="row" ng-if="vm.installForm.auth.bitbucketServerKeys.callbackUrl">
                          <div class="col-md-4">
                            Callback URL
                          </div>
                          <div class="col-md-8">
                            <input type="text" class="form-control input-sm" name="bitbucketServerCallbackUrl"
                              ng-model="vm.installForm.auth.bitbucketServerKeys.callbackUrl" readonly/>
                          </div>
                        </div>
                      </div>
                      <!-- GitHub -->
                      <div class="col-md-offset-1 col-md-11">
                        <div class="row">
                          <div class="col-md-1">
                            <div class="row">
                              <div class="col-md-6">
                                <div class="checkbox">
                                  <label>
                                    <input type="checkbox" ng-model="vm.installForm.auth.githubKeys.isEnabled" ng-change="vm.toggleAuthProvider('github')"/>
                                  </label>
                                </div>
                              </div>
                              <div class="col-md-6">
                                <div class="checkbox">
                                  <label>
                                    <input type="checkbox" ng-model="vm.installForm.scm.github.isEnabled" ng-disabled="vm.installForm.auth.githubKeys.isEnabled"/>
                                  </label>
                                </div>
                              </div>
                            </div>
                          </div>
                          <div class="col-md-11">
                            <div class="checkbox" style="padding-left: 5px;">
                              GitHub
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="col-md-offset-2 col-md-10" ng-if="vm.installForm.auth.githubKeys.isEnabled">
                        <div class="row">
                          <div class="col-md-4">
                            Client ID
                          </div>
                          <div class="col-md-8">
                            <input type="text" class="form-control input-sm" name="githubClientId"
                              ng-model="vm.installForm.auth.githubKeys.data.clientId" ng-disabled="vm.installing || vm.saving"/>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-4">
                            Client Secret
                          </div>
                          <div class="col-md-8">
                            <input type="text" class="form-control input-sm" name="githubClientSecret"
                              ng-model="vm.installForm.auth.githubKeys.data.clientSecret" ng-disabled="vm.installing || vm.saving"/>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-4">
                            URL
                          </div>
                          <div class="col-md-8">
                            <input type="text" class="form-control input-sm" name="githubUrl"
                              ng-model="vm.installForm.auth.githubKeys.data.url" ng-disabled="true"/>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-4">
                            WWW URL
                          </div>
                          <div class="col-md-8">
                            <input type="text" class="form-control input-sm" name="githubWWWUrl"
                              ng-model="vm.installForm.www.url.data.url" ng-disabled="true"/>
                          </div>
                        </div>
                        <div class="row" ng-if="vm.installForm.auth.githubKeys.callbackUrl">
                          <div class="col-md-4">
                            Callback URL
                          </div>
                          <div class="col-md-8">
                            <input type="text" class="form-control input-sm" name="githubCallbackUrl"
                              ng-model="vm.installForm.auth.githubKeys.callbackUrl" readonly/>
                          </div>
                        </div>
                      </div>
                      <!-- GitHub Enterprise -->
                      <div class="col-md-offset-1 col-md-11">
                        <div class="row">
                          <div class="col-md-1">
                            <div class="row">
                              <div class="col-md-6">
                                <div class="checkbox">
                                  <label>
                                    <input type="checkbox" ng-model="vm.installForm.auth.githubEnterpriseKeys.isEnabled" ng-change="vm.toggleAuthProvider('githubEnterprise')"/>
                                  </label>
                                </div>
                              </div>
                              <div class="col-md-6">
                                <div class="checkbox">
                                  <label>
                                    <input type="checkbox" ng-model="vm.installForm.scm.githubEnterprise.isEnabled" ng-disabled="vm.installForm.auth.githubEnterpriseKeys.isEnabled"/>
                                  </label>
                                </div>
                              </div>
                            </div>
                          </div>
                          <div class="col-md-11">
                            <div class="checkbox" style="padding-left: 5px;">
                              GitHub Enterprise
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="col-md-offset-2 col-md-10" ng-if="vm.installForm.auth.githubEnterpriseKeys.isEnabled">
                        <div class="row">
                          <div class="col-md-4">
                            Client ID
                          </div>
                          <div class="col-md-8">
                            <input type="text" class="form-control input-sm" name="githubEnterpriseClientId"
                              ng-model="vm.installForm.auth.githubEnterpriseKeys.data.clientId" ng-disabled="vm.installing || vm.saving"/>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-4">
                            Client Secret
                          </div>
                          <div class="col-md-8">
                            <input type="text" class="form-control input-sm" name="githubEnterpriseClientSecret"
                              ng-model="vm.installForm.auth.githubEnterpriseKeys.data.clientSecret" ng-disabled="vm.installing || vm.saving"/>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-4">
                            URL
                          </div>
                          <div class="col-md-8">
                            <input type="text" class="form-control input-sm" name="githubEnterpriseUrl"
                              ng-model="vm.installForm.auth.githubEnterpriseKeys.data.url" ng-disabled="vm.installing || vm.saving"/>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-4">
                            WWW URL
                          </div>
                          <div class="col-md-8">
                            <input type="text" class="form-control input-sm" name="githubEnterpriseWWWUrl"
                              ng-model="vm.installForm.www.url.data.url" ng-disabled="true"/>
                          </div>
                        </div>
                        <div class="row" ng-if="vm.installForm.auth.githubEnterpriseKeys.callbackUrl">
                          <div class="col-md-4">
                            Callback URL
                          </div>
                          <div class="col-md-8">
                            <input type="text" class="form-control input-sm" name="githubEnterpriseCallbackUrl"
                              ng-model="vm.installForm.auth.githubEnterpriseKeys.callbackUrl" readonly/>
                          </div>
                        </div>
                      </div>
                        <!-- GitLab -->
                      <div class="col-md-offset-1 col-md-11">
                        <div class="row">
                          <div class="col-md-1">
                            <div class="row">
                              <div class="col-md-6">
                                <div class="checkbox">
                                  <label>
                                    <input type="checkbox" ng-model="vm.installForm.auth.gitlabKeys.isEnabled" ng-change="vm.toggleAuthProvider('gitlab')"/>
                                  </label>
                                </div>
                              </div>
                              <div class="col-md-6">
                                <div class="checkbox">
                                  <label>
                                    <input type="checkbox" ng-model="vm.installForm.scm.gitlab.isEnabled" ng-disabled="vm.installForm.auth.gitlabKeys.isEnabled"/>
                                  </label>
                                </div>
                              </div>
                            </div>
                          </div>
                          <div class="col-md-11">
                            <div class="checkbox" style="padding-left: 5px;">
                              GitLab
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="col-md-offset-2 col-md-10" ng-if="vm.installForm.auth.gitlabKeys.isEnabled">
                        <div class="row">
                          <div class="col-md-4">
                            Application ID
                          </div>
                          <div class="col-md-8">
                            <input type="text" class="form-control input-sm" name="gitlabClientId"
                              ng-model="vm.installForm.auth.gitlabKeys.data.clientId" ng-disabled="vm.installing || vm.saving"/>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-4">
                            Secret
                          </div>
                          <div class="col-md-8">
                            <input type="text" class="form-control input-sm" name="gitlabClientSecret"
                              ng-model="vm.installForm.auth.gitlabKeys.data.clientSecret" ng-disabled="vm.installing || vm.saving"/>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-4">
                            URL
                          </div>
                          <div class="col-md-8">
                            <input type="text" class="form-control input-sm" name="gitlabUrl"
                              ng-model="vm.installForm.auth.gitlabKeys.data.url" ng-disabled="false"/>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-4">
                            WWW URL
                          </div>
                          <div class="col-md-8">
                            <input type="text" class="form-control input-sm" name="gitlabWWWUrl"
                              ng-model="vm.installForm.www.url.data.url" ng-disabled="true"/>
                          </div>
                        </div>
                        <div class="row" ng-if="vm.installForm.auth.gitlabKeys.callbackUrl">
                          <div class="col-md-4">
                            Callback URL
                          </div>
                          <div class="col-md-8">
                            <input type="text" class="form-control input-sm" name="gitlabCallbackUrl"
                              ng-model="vm.installForm.auth.gitlabKeys.callbackUrl" readonly/>
                          </div>
                        </div>
                      </div>
                    </div>
                    <!-- Build Configuration -->
                    <div class="row">
                      <div class="col-md-12">
                        &nbsp;
                        <h4 class="panel-title">
                          Build Configuration
                        </h4>
                        &nbsp;
                      </div>
                      <!-- Artifacts -->
                      <div class="col-md-offset-1 col-md-11">
                        <div class="row">
                          <div class="col-md-12">
                            <b>Artifacts</b>
                          </div>
                        </div>
                      </div>
                      <div class="col-md-offset-2 col-md-10">
                        <div class="row">
                          <div class="col-md-12">
                            <div class="checkbox">
                              <label>
                                <input type="checkbox" ng-model="vm.installForm.filestore.amazonKeys.isEnabled" ng-disabled="vm.installing || vm.saving"/>
                                Upload artifacts to AWS
                              </label>
                            </div>
                          </div>
                        </div>
                        <div class="row" ng-if="vm.installForm.filestore.amazonKeys.isEnabled">
                          <div class="col-md-offset-1 col-md-11">
                            Enter AWS information for artifact upload:
                          </div>
                          <div class="col-md-offset-2 col-md-2">
                            Access Key
                          </div>
                          <div class="col-md-8">
                            <input type="text" class="form-control input-sm" name="filestoreAccessKey"
                              ng-model="vm.installForm.filestore.amazonKeys.data.accessKey" ng-disabled="vm.installing || vm.saving"/>
                          </div>
                          <div class="col-md-offset-2 col-md-2">
                            Secret Key
                          </div>
                          <div class="col-md-8">
                            <input type="text" class="form-control input-sm" name="filestoreSecretKey"
                              ng-model="vm.installForm.filestore.amazonKeys.data.secretKey" ng-disabled="vm.installing || vm.saving"/>
                          </div>
                          <div class="col-md-offset-2 col-md-2">
                            Root S3 Bucket
                          </div>
                          <div class="col-md-8">
                            <input type="text" class="form-control input-sm" name="rootS3Bucket"
                              ng-model="vm.installForm.systemSettings.rootS3Bucket" ng-disabled="vm.installing || vm.saving"/>
                          </div>
                        </div>
                      </div>
                      <!-- Nodes -->
                      <div class="col-md-offset-1 col-md-11">
                        <div>&nbsp;</div>
                        <div class="row">
                          <div class="col-md-12">
                            <b>Nodes</b>
                          </div>
                        </div>
                      </div>
                      <div class="col-md-offset-2 col-md-10">
                        <div class="row">
                          <div class="col-md-12">
                            <div class="checkbox">
                              <input type="checkbox" ng-model="vm.installForm.systemSettings.allowSystemNodes" ng-disabled="vm.installing || vm.saving"/>
                              Enable system nodes (always-running nodes, available to any user)
                            </div>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-12">
                            <div class="checkbox">
                              <input type="checkbox" ng-model="vm.installForm.systemSettings.allowCustomNodes" ng-disabled="vm.installing || vm.saving"/>
                              Enable custom nodes (users can attach always-running nodes to their subscription)
                            </div>
                          </div>
                        </div>
                        <div class="row" ng-if="vm.installForm.systemSettings.allowCustomNodes">
                          <div class="col-md-offset-1 col-md-11">
                            <div class="checkbox">
                              <input type="checkbox" ng-model="vm.installForm.systemSettings.customNodesAdminOnly" ng-disabled="vm.installing || vm.saving"/>
                              Restrict custom node creation to admins only
                            </div>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-12">
                            <div class="checkbox">
                              <!-- enable/disable the provision integration when allowDynamicNodes is selected -->
                              <input type="checkbox" ng-model="vm.installForm.systemSettings.allowDynamicNodes" ng-change="vm.installForm.provision.amazonKeys.isEnabled = vm.installForm.systemSettings.allowDynamicNodes" ng-disabled="vm.installing || vm.saving"/>
                              Enable dynamic nodes (nodes are created and deleted as needed)
                            </div>
                          </div>
                        </div>
                        <div class="row" ng-if="vm.installForm.systemSettings.allowDynamicNodes">
                          <div class="col-md-offset-1 col-md-11">
                            Enter AWS access key and secret for node provisioning:
                          </div>
                          <div class="col-md-offset-2 col-md-2">
                            Access Key
                          </div>
                          <div class="col-md-8">
                            <input type="text" class="form-control input-sm" name="provisionAccessKey"
                              ng-model="vm.installForm.provision.amazonKeys.data.accessKey" ng-disabled="vm.installing || vm.saving"/>
                          </div>
                          <div class="col-md-offset-2 col-md-2">
                            Secret Key
                          </div>
                          <div class="col-md-8">
                            <input type="text" class="form-control input-sm" name="provisionSecretKey"
                              ng-model="vm.installForm.provision.amazonKeys.data.secretKey" ng-disabled="vm.installing || vm.saving"/>
                          </div>
                        </div>
                        <div class="row" ng-if="vm.installForm.systemSettings.allowDynamicNodes">
                          <div>&nbsp;</div>
                          <div class="col-md-offset-1 col-md-11">
                            Select the default size of provisioned nodes:
                          </div>
                          <div class="col-md-offset-2 col-md-2">
                            Instance size
                          </div>
                          <div class="col-md-8">
                            <input type="text" class="form-control input-sm" name="defaultMinionInstanceSize"
                              ng-model="vm.installForm.systemSettings.defaultMinionInstanceSize" ng-disabled="vm.installing || vm.saving"/>
                          </div>
                        </div>
                        <div class="row" ng-if="vm.installForm.systemSettings.allowDynamicNodes">
                          <div>&nbsp;</div>
                          <div class="col-md-offset-1 col-md-11">
                            Specify your machine image settings:
                          </div>
                        </div>
                        <div class="row has-error" ng-if="!vm.hasDefaultx86SystemMachineImage() && vm.installForm.systemSettings.allowDynamicNodes">
                          <div class="col-md-offset-1 col-md-11">
                            <span class="help-block">
                              One machine image must be default.
                            </span>
                          </div>
                        </div>
                        <div class="row" ng-if="vm.installForm.systemSettings.allowDynamicNodes" ng-repeat="machineImage in vm.installForm.systemMachineImages">
                          <div class="col-md-12">
                            <div class="row">
                              <div class="col-md-offset-2 col-md-2">
                                Name
                              </div>
                              <div class="col-md-6">
                                <div ng-class="machineImage.name ? '' : 'has-error'">
                                  <input type="text" class="form-control input-sm" name="machineImage{{$index}}Name"
                                    ng-model="machineImage.name" ng-disabled="vm.installing || vm.saving"/>
                                </div>
                              </div>
                              <div class="col-md-2">
                                <button class="btn btn-sm btn-danger" ng-disabled="vm.installForm.systemMachineImages.length === 1" ng-click="vm.removeSystemMachineImage(machineImage)">
                                  Remove
                                </button>
                              </div>
                            </div>
                            <div class="row">
                              <div class="col-md-offset-2 col-md-2">
                                Description
                              </div>
                              <div class="col-md-8">
                                <div ng-class="machineImage.description ? '' : 'has-error'">
                                  <input type="text" class="form-control input-sm" name="machineImage{{$index}}Description"
                                    ng-model="machineImage.description" ng-disabled="vm.installing || vm.saving"/>
                                </div>
                              </div>
                            </div>
                            <div class="row">
                              <div class="col-md-offset-2 col-md-2">
                                Architecture
                              </div>
                              <div class="col-md-8">
                                <select
                                  ng-model="machineImage.archTypeCode"
                                  ng-init="machineImage.archTypeCode = machineImage.archTypeCode || vm.archTypes[0].code"
                                  ng-options="arch.code as arch.name for arch in vm.archTypes">
                                </select>
                              </div>
                            </div>
                            <div class="row">
                              <div class="col-md-offset-2 col-md-2">
                                isAvailable
                                  <span>
                                    <a title="This is available for the user to select form the dropdown in the subscription settings.">
                                      <img src="images/question_mark.png" height="13px" style="vertical-align: text-top !important"/>
                                    </a>
                                  </span>
                              </div>
                              <div class="col-md-8">
                                <input type="checkbox" name="machineImage{{$index}}IsAvailable"
                                  ng-model="machineImage.isAvailable" ng-disabled="vm.installing || vm.saving || vm.isDefault"/>
                              </div>
                            </div>
                            <div class="row">
                              <div class="col-md-offset-2 col-md-2">
                                isDefault
                                  <span>
                                    <a title="This is the default machine image.">
                                      <img src="images/question_mark.png" height="13px" style="vertical-align: text-top !important"/>
                                    </a>
                                  </span>
                              </div>
                              <div class="col-md-8">
                                <input type="checkbox" name="machineImage{{$index}}IsDefault"
                                  ng-model="machineImage.isDefault" ng-disabled= "vm.installing || vm.saving ||
                                    (!machineImage.isDefault && machineImage.archTypeCode === vm.x86ArchCode && vm.hasDefaultx86SystemMachineImage()) ||
                                    (!machineImage.isDefault && machineImage.archTypeCode === vm.armArchCode && vm.hasDefaultArmSystemMachineImage())"/>
                              </div>
                            </div>
                            <div class="row">
                              <div class="col-md-offset-2 col-md-2">
                                Shippable AMI Id
                                  <span>
                                    <a target="_blank" href="http://docs.shippable.com/reference/machine-images-overview/" title="Please click here to see the list of all the ami with their versions">
                                      <img src="images/question_mark.png" height="13px" style="vertical-align: text-top !important"/>
                                    </a>
                                  </span>
                              </div>
                              <div class="col-md-8">
                                <div ng-class="machineImage.externalId ? '' : 'has-error'">
                                  <input type="text" class="form-control input-sm" name="machineImage{{$index}}ExternalId"
                                    ng-model="machineImage.externalId" ng-disabled="vm.installing || vm.saving"/>
                                </div>
                              </div>
                            </div>
                            <div class="row">
                              <div class="col-md-offset-2 col-md-2">
                                Provider
                              </div>
                              <div class="col-md-8">
                                <div ng-class="machineImage.provider ? '' : 'has-error'">
                                  <input type="text" class="form-control input-sm" name="machineImage{{$index}}Provider"
                                    ng-model="machineImage.provider" ng-disabled="true"/>
                                </div>
                              </div>
                            </div>
                            <div class="row">
                              <div class="col-md-offset-2 col-md-2">
                                Region
                              </div>
                              <div class="col-md-8">
                                <div ng-class="machineImage.region ? '' : 'has-error'">
                                  <input type="text" class="form-control input-sm" name="machineImage{{$index}}Region"
                                    ng-model="machineImage.region" ng-disabled="vm.installing || vm.saving"/>
                                </div>
                              </div>
                            </div>
                            <div class="row">
                              <div class="col-md-offset-2 col-md-2">
                                Key pair name
                              </div>
                              <div class="col-md-8">
                                <div ng-class="machineImage.keyName ? '' : 'has-error'">
                                  <input type="text" class="form-control input-sm"  name="machineImage{{$index}}KeyName"
                                    ng-model="machineImage.keyName" ng-disabled="vm.installing || vm.saving"/>
                                </div>
                              </div>
                            </div>
                            <div class="row">
                              <div class="col-md-offset-2 col-md-2">
                                runSh Image
                              </div>
                              <div class="col-md-8">
                                <div ng-class="machineImage.runShImage ? '' : 'has-error'">
                                  <input type="text" class="form-control input-sm" name="machineImage{{$index}}RunShImage"
                                    ng-model="machineImage.runShImage"/>
                                </div>
                              </div>
                            </div>
                            <div class="row">
                              <div class="col-md-offset-2 col-md-2">
                                Security group id
                              </div>
                              <div class="col-md-8">
                                <div ng-class="machineImage.securityGroup ? '' : 'has-error'">
                                  <input type="text" class="form-control input-sm" name="machineImage{{$index}}SecurityGroup"
                                    ng-model="machineImage.securityGroup" ng-disabled="vm.installing || vm.saving"/>
                                </div>
                              </div>
                            </div>
                            <div class="row">
                              <div class="col-md-offset-2 col-md-2">
                                Subnet ID
                              </div>
                              <div class="col-md-8">
                                <input type="text" class="form-control input-sm" name="machineImage{{$index}}SubnetId"
                                  ng-model="machineImage.subnetId" ng-disabled="vm.installing || vm.saving"/>
                              </div>
                            </div>
                            <div class="row">
                              <div class="col-md-offset-2 col-md-2">
                                Drydock Tag
                              </div>
                              <div class="col-md-8">
                                <div ng-class="machineImage.drydockTag ? '' : 'has-error'">
                                  <input type="text" class="form-control input-sm" name="machineImage{{$index}}DrydockTag"
                                    ng-model="machineImage.drydockTag" ng-disabled="vm.installing || vm.saving"/>
                                </div>
                              </div>
                            </div>
                            <div class="row">
                              <div class="col-md-offset-2 col-md-2">
                                Drydock Family
                              </div>
                              <div class="col-md-8">
                                <div ng-class="machineImage.drydockFamily ? '' : 'has-error'">
                                  <input type="text" class="form-control input-sm" name="machineImage{{$index}}DrydockFamily"
                                    ng-model="machineImage.drydockFamily" ng-disabled="vm.installing || vm.saving"/>
                                </div>
                              </div>
                            </div>
                            <div class="row">
                              <div class="col-md-offset-2 col-md-2">
                                SSH User
                              </div>
                              <div class="col-md-8">
                                <div ng-class="machineImage.sshUser ? '' : 'has-error'">
                                  <input type="text" class="form-control input-sm" name="machineImage{{$index}}SSHUser"
                                    ng-model="machineImage.sshUser" ng-disabled="vm.installing || vm.saving"/>
                                </div>
                              </div>
                            </div>
                            <div class="row">
                              <div class="col-md-offset-2 col-md-2">
                                SSH Port
                              </div>
                              <div class="col-md-8">
                                <div ng-class="machineImage.sshPort ? '' : 'has-error'">
                                  <input type="number" class="form-control input-sm" name="machineImage{{$index}}SSHPort"
                                    ng-model="machineImage.sshPort" ng-disabled="vm.installing || vm.saving"/>
                                </div>
                              </div>
                            </div>
                            <div>&nbsp;</div>
                          </div>
                        </div>
                        <div class="row" ng-if="vm.installForm.systemSettings.allowDynamicNodes">
                          <div class="col-md-offset-1 col-md-11 text-center">
                            <button class="btn btn-sm btn-default" ng-click="vm.addSystemMachineImage()">
                              Add another machine image
                            </button>
                          </div>
                        </div>
                        &nbsp;
                        <div class="row">
                          <div class="col-md-4">
                            Location of node provisioning scripts
                          </div>
                          <div class="col-md-8">
                            <input type="text" class="form-control input-sm" name="nodeScriptsLocation"
                              ng-model="vm.installForm.systemSettings.nodeScriptsLocation" ng-disabled="vm.installing || vm.saving"/>
                          </div>
                        </div>
                      </div>
                      <!-- Settings -->
                      <div class="col-md-offset-1 col-md-11">
                        <div>&nbsp;</div>
                        <div class="row">
                          <div class="col-md-12">
                            <b>Settings</b>
                          </div>
                        </div>
                      </div>
                      <div class="col-md-offset-2 col-md-10">
                        <div class="row">
                          <div class="col-md-4">
                            Default build timeout (in milliseconds)
                          </div>
                          <div class="col-md-8">
                            <input type="text" class="form-control input-sm" name="buildTimeoutMS"
                              ng-model="vm.installForm.systemSettings.buildTimeoutMS" ng-disabled="vm.installing || vm.saving"/>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-4">
                            Default number of minions per subscription
                          </div>
                          <div class="col-md-8">
                            <input type="text" class="form-control input-sm" name="defaultMinionCount"
                              ng-model="vm.installForm.systemSettings.defaultMinionCount" ng-disabled="vm.installing || vm.saving"/>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-4">
                            Allowed system image family
                          </div>
                          <div class="col-md-8">
                            <input type="text" class="form-control input-sm" name="allowedSystemImageFamily"
                              ng-model="vm.installForm.systemSettings.allowedSystemImageFamily" ng-disabled="vm.installing || vm.saving"/>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-4">
                            Job console batch size
                          </div>
                          <div class="col-md-8">
                            <input type="text" class="form-control input-sm" name="jobConsoleBatchSize"
                              ng-model="vm.installForm.systemSettings.jobConsoleBatchSize" ng-disabled="vm.installing || vm.saving"/>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-4">
                            Job console buffer time interval
                          </div>
                          <div class="col-md-8">
                            <input type="text" class="form-control input-sm" name="jobConsoleBufferTimeIntervalMS"
                              ng-model="vm.installForm.systemSettings.jobConsoleBufferTimeIntervalMS" ng-disabled="vm.installing || vm.saving"/>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-12">
                            <div class="checkbox">
                              <input type="checkbox" ng-model="vm.installForm.systemSettings.autoSelectBuilderToken" ng-disabled="vm.installing || vm.saving"/>
                              Auto-select the token used to run webhook builds
                            </div>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-12">
                            <div class="checkbox">
                              <input type="checkbox" ng-model="vm.installForm.systemSettings.enforcePrivateJobQuota" ng-disabled="vm.installing || vm.saving"/>
                              Limit number of builds allowed for private repos
                            </div>
                          </div>
                        </div>
                        <div class="row" ng-if="vm.installForm.systemSettings.enforcePrivateJobQuota">
                          <div class="col-md-offset-1 col-md-3">
                            Default private build limit:
                          </div>
                          <div class="col-md-8">
                            <input type="text" class="form-control input-sm" name="defaultPrivateJobQuota"
                              ng-model="vm.installForm.systemSettings.defaultPrivateJobQuota" ng-disabled="vm.installing || vm.saving"/>
                          </div>
                        </div>
                      </div>
                    </div>
                    <!-- Email -->
                    <div class="row">
                      <div class="col-md-12">
                        &nbsp;
                        <h4 class="panel-title">
                          Email Provider
                        </h4>
                      </div>
                      <!-- Gmail -->
                      <div class="col-md-offset-1 col-md-11">
                        <div class="row">
                          <div class="col-md-12">
                            <div class="checkbox">
                              <label>
                                <input type="checkbox" ng-model="vm.installForm.notification.gmailCreds.isEnabled"
                                  ng-disabled="vm.installing || vm.saving || vm.installForm.notification.mailgunCreds.isEnabled || vm.installForm.notification.smtpCreds.isEnabled">
                                Gmail
                              </label>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="col-md-offset-2 col-md-10" ng-if="vm.installForm.notification.gmailCreds.isEnabled">
                        <div class="row">
                          <div class="col-md-4">
                            Username
                          </div>
                          <div class="col-md-8">
                            <input type="text" class="form-control input-sm" name="gmailUsername"
                              ng-model="vm.installForm.notification.gmailCreds.data.username" ng-disabled="vm.installing || vm.saving"/>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-4">
                            Password
                          </div>
                          <div class="col-md-8">
                            <input type="text" class="form-control input-sm" name="gmailPassword"
                              ng-model="vm.installForm.notification.gmailCreds.data.password" ng-disabled="vm.installing || vm.saving"/>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-4">
                            Proxy
                          </div>
                          <div class="col-md-8">
                            <input type="text" class="form-control input-sm" name="gmailProxy"
                              ng-model="vm.installForm.notification.gmailCreds.data.proxy" ng-disabled="vm.installing || vm.saving"/>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-4">
                            Email Sender
                          </div>
                          <div class="col-md-8">
                            <input type="text" class="form-control input-sm" name="gmailEmailSender"
                              ng-model="vm.installForm.notification.gmailCreds.data.emailSender" ng-disabled="vm.installing || vm.saving"/>
                          </div>
                        </div>
                      </div>
                      <!-- Mailgun -->
                      <div class="col-md-offset-1 col-md-11">
                        <div class="row">
                          <div class="col-md-12">
                            <div class="checkbox">
                              <label>
                                <input type="checkbox" ng-model="vm.installForm.notification.mailgunCreds.isEnabled"
                                  ng-disabled="vm.installing || vm.saving || vm.installForm.notification.smtpCreds.isEnabled || vm.installForm.notification.gmailCreds.isEnabled">
                                Mailgun
                              </label>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="col-md-offset-2 col-md-10" ng-if="vm.installForm.notification.mailgunCreds.isEnabled">
                        <div class="row">
                          <div class="col-md-4">
                            API Key
                          </div>
                          <div class="col-md-8">
                            <input type="text" class="form-control input-sm" name="mailgunApiKey"
                              ng-model="vm.installForm.notification.mailgunCreds.data.apiKey" ng-disabled="vm.installing || vm.saving"/>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-4">
                            Domain
                          </div>
                          <div class="col-md-8">
                            <input type="text" class="form-control input-sm" name="mailgunDomain"
                              ng-model="vm.installForm.notification.mailgunCreds.data.domain" ng-disabled="vm.installing || vm.saving"/>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-4">
                            Proxy
                          </div>
                          <div class="col-md-8">
                            <input type="text" class="form-control input-sm" name="mailgunProxy"
                              ng-model="vm.installForm.notification.mailgunCreds.data.proxy" ng-disabled="vm.installing || vm.saving"/>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-4">
                            Email Sender
                          </div>
                          <div class="col-md-8">
                            <input type="text" class="form-control input-sm" name="mailgunEmailSender"
                              ng-model="vm.installForm.notification.mailgunCreds.data.emailSender" ng-disabled="vm.installing || vm.saving"/>
                          </div>
                        </div>
                      </div>
                      <!-- SMTP -->
                      <div class="col-md-offset-1 col-md-11">
                        <div class="row">
                          <div class="col-md-12">
                            <div class="checkbox">
                              <label>
                                <input type="checkbox" ng-model="vm.installForm.notification.smtpCreds.isEnabled"
                                  ng-disabled="vm.installing || vm.saving || vm.installForm.notification.mailgunCreds.isEnabled || vm.installForm.notification.gmailCreds.isEnabled">
                                SMTP
                              </label>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="col-md-offset-2 col-md-10" ng-if="vm.installForm.notification.smtpCreds.isEnabled">
                        <div class="row">
                          <div class="col-md-4">
                            Email Auth User
                          </div>
                          <div class="col-md-8">
                            <input type="text" class="form-control input-sm" name="smtpEmailAuthUser"
                              ng-model="vm.installForm.notification.smtpCreds.data.emailAuthUser" ng-disabled="vm.installing || vm.saving"/>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-4">
                            Email Auth Password
                          </div>
                          <div class="col-md-8">
                            <input type="text" class="form-control input-sm" name="smtpEmailAuthPassword"
                              ng-model="vm.installForm.notification.smtpCreds.data.emailAuthPassword" ng-disabled="vm.installing || vm.saving"/>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-4">
                            Email Sender
                          </div>
                          <div class="col-md-8">
                            <input type="text" class="form-control input-sm" name="smtpEmailSender"
                              ng-model="vm.installForm.notification.smtpCreds.data.emailSender" ng-disabled="vm.installing || vm.saving"/>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-4">
                            Host
                          </div>
                          <div class="col-md-8">
                            <input type="text" class="form-control input-sm" name="smtpHost"
                              ng-model="vm.installForm.notification.smtpCreds.data.host" ng-disabled="vm.installing || vm.saving"/>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-4">
                            Port
                          </div>
                          <div class="col-md-8">
                            <input type="text" class="form-control input-sm" name="smtpPort"
                              ng-model="vm.installForm.notification.smtpCreds.data.port" ng-disabled="vm.installing || vm.saving"/>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-4">
                            Secure
                          </div>
                          <div class="col-md-8">
                            <input type="text" class="form-control input-sm" name="smtpSecure"
                              ng-model="vm.installForm.notification.smtpCreds.data.secure" ng-disabled="vm.installing || vm.saving"/>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-4">
                            Hostname
                          </div>
                          <div class="col-md-8">
                            <input type="text" class="form-control input-sm" name="smtpHostname"
                              ng-model="vm.installForm.notification.smtpCreds.data.hostname" ng-disabled="vm.installing || vm.saving"/>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-4">
                            Proxy
                          </div>
                          <div class="col-md-8">
                            <input type="text" class="form-control input-sm" name="smtpProxy"
                              ng-model="vm.installForm.notification.smtpCreds.data.proxy" ng-disabled="vm.installing || vm.saving"/>
                          </div>
                        </div>
                      </div>
                    </div>
                    <!-- System Settings -->
                    <div class="row">
                      <div class="col-md-12">
                        &nbsp;
                        <h4 class="panel-title">
                          System Settings
                        </h4>
                        &nbsp;
                      </div>
                      <div class="col-md-offset-2 col-md-10">
                        <div class="row">
                          <div class="col-md-4">
                            Run Mode
                          </div>
                          <div class="col-md-8">
                            <input type="text" class="form-control input-sm" name="runMode"
                              ng-model="vm.installForm.systemSettings.runMode" ng-disabled="vm.installing || vm.saving"/>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-4">
                            Service User Token
                          </div>
                          <div class="col-md-8">
                            <input type="text" class="form-control input-sm" name="serviceUserToken"
                              ng-model="vm.installForm.systemSettings.serviceUserToken" ng-disabled="true"/>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-4">
                            API Retry Interval
                          </div>
                          <div class="col-md-8">
                            <input type="text" class="form-control input-sm" name="apiRetryIntervalMS"
                              ng-model="vm.installForm.systemSettings.apiRetryIntervalMS" ng-disabled="vm.installing || vm.saving"/>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-4">
                            Account Sync Frequency (in Hours)
                          </div>
                          <div class="col-md-8">
                            <input type="text" class="form-control input-sm" name="accountSyncFrequencyHr"
                              ng-model="vm.installForm.systemSettings.accountSyncFrequencyHr" ng-disabled="vm.installing || vm.saving"/>
                          </div>
                        </div>
                        <div class="row" ng-if="vm.admiralEnv.IS_SERVER === false">
                          <div class="col-md-12">
                            <div class="checkbox">
                              <input type="checkbox" ng-model="vm.installForm.systemSettings.technicalSupportAvailable" ng-disabled="vm.installing || vm.saving"/>
                              Show Link to Shippable Status
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>

                    <!-- Install and Save Buttons -->
                    <div class="row">
                      <div class="col-md-offset-1 col-md-10 text-right">
                        <p>
                          &nbsp;
                        </p>
                        <button ng-if="!vm.requireRestart" class="btn btn-md btn-primary" type="submit" ng-disabled="vm.installing || vm.saving || vm.restartingServices" ng-click="vm.install()">
                          <div ng-if="vm.installing">
                            Installing...
                          </div>
                          <div ng-if="!vm.installing">
                            Install
                          </div>
                        </button>
                        <button ng-if="vm.requireRestart" class="btn btn-md btn-primary" type="submit" ng-disabled="vm.installing || vm.saving || vm.restartingServices" ng-click="vm.showSaveModal()">
                          <div ng-if="vm.saving">
                            Saving...
                          </div>
                          <div ng-if="!vm.saving">
                            Save
                          </div>
                        </button>
                        <button ng-if="vm.requireRestart" class="btn btn-md btn-primary" type="submit" ng-disabled="vm.installing || vm.saving || vm.restartingServices" ng-click="vm.showRestartServicesModal()">
                          <div ng-if="vm.restartingServices">
                            Restarting...
                          </div>
                          <div ng-if="!vm.restartingServices">
                            Restart Services
                          </div>
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">
              <a data-toggle="collapse" href="#servicespanel">
                {{(vm.initialized && vm.systemSettings.releaseVersion !== vm.admiralEnv.RELEASE) ? '4.' : '3.'}} Services
              </a>
            </h3>
          </div>
          <div id="servicespanel" class="panel-collapse collapse">
            <div class="panel-body">
              <div ng-if="!vm.isLoaded">
                Loading...
              </div>
              <div ng-if="!vm.initialized">
                Please initialize first.
              </div>
              <div ng-if="vm.isLoaded && vm.initialized">
                <!-- Core Services -->
                <div class="row">
                  <div class="col-md-offset-1 col-md-10">
                    <div class="row">
                      <table class="table table-condensed table-striped">
                        <thead>
                        </thead>
                        <tbody>
                          <tr ng-repeat="service in vm.allServices" ng-if="service.isEnabled && (service.serviceName !== 'mktg' || !vm.admiralEnv.IS_SERVER)">
                            <td>
                              <b>{{service.serviceName}}</b>
                            </td>
                            <td>
                            </td>
                            <td>
                            </td>
                            <td>
                            </td>
                            <td class="text-right">
                              Replicas:
                            </td>
                            <td ng-if="vm.isGlobalService(service.serviceName)">
                              {{service.replicas}}
                            </td>
                            <td ng-if="!vm.isGlobalService(service.serviceName)">
                              <input type=number ng-model="service.replicas" />
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                  <div>
                    &nbsp;
                  </div>
                </div>
                <!-- Save and Restart Buttons -->
                <div class="row">
                  <div class="col-md-offset-1 col-md-10 text-right">
                    <p>
                      &nbsp;
                    </p>
                    <button ng-if="vm.requireRestart" class="btn btn-md btn-primary" type="submit" ng-disabled="vm.installing || vm.saving || vm.restartingServices" ng-click="vm.showSaveServicesModal()">
                      <div ng-if="vm.saving">
                        Saving...
                      </div>
                      <div ng-if="!vm.saving">
                        Save
                      </div>
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">
              <a data-toggle="collapse" href="#addonpanel">
                {{(vm.initialized && vm.systemSettings.releaseVersion !== vm.admiralEnv.RELEASE) ? '5.' : '4.'}} Add-ons
              </a>
            </h3>
          </div>
          <div id="addonpanel" class="panel-collapse collapse">
            <div class="panel-body">
              <div ng-if="!vm.isLoaded">
                Loading...
              </div>
              <div ng-if="!vm.initialized">
                Please initialize first.
              </div>
              <div ng-if="vm.isLoaded && vm.initialized">
                <div class="row">
                  <div class="col-md-offset-1 col-md-10">
                    <!-- Account/Master integrations -->
                    <div class="row">
                      <div class="col-md-12">
                        &nbsp;
                        <h4 class="panel-title">
                          Enable account integrations for your users:
                        </h4>
                        &nbsp;
                      </div>
                      <!-- Cloud Providers -->
                      <div class="col-md-offset-1 col-md-11">
                        <div class="row">
                          <div class="col-md-12">
                            <b>Cloud Providers</b>
                          </div>
                        </div>
                      </div>
                      <div class="col-md-offset-2 col-md-10">
                        <div class="row">
                          <div class="col-md-12">
                            <div class="checkbox">
                              <label>
                                <input type="checkbox" ng-model="vm.addonsForm.AWS.isEnabled">
                                {{vm.addonsForm.AWS.displayName}} <span ng-if="vm.addonsForm.AWS.isDeprecated" title="This integration has been deprecated. New integrations of this type cannot be created anymore. If enabled, existing integrations can continue to be used. Please use {{vm.addonsForm.amazonKeys.displayName}} instead.">(Deprecated) 🛈</i></span>
                              </label>
                            </div>
                            <div class="checkbox">
                              <label>
                                <input type="checkbox" ng-model="vm.addonsForm.amazonKeys.isEnabled">
                                {{vm.addonsForm.amazonKeys.displayName}}</i>
                              </label>
                            </div>
                            <div class="checkbox">
                              <label>
                                <input type="checkbox" ng-model="vm.addonsForm.AWS_IAM.isEnabled">
                                {{vm.addonsForm.AWS_IAM.displayName}}
                              </label>
                            </div>
                            <div class="row" ng-if="vm.addonsForm.AWS_IAM.isEnabled">
                              <div class="col-md-offset-1 col-md-3">
                                AWS Account ID:
                              </div>
                              <div class="col-md-8">
                                <input type="text" class="form-control input-sm" name="awsAccountId"
                                  ng-model="vm.addonsForm.systemSettings.awsAccountId" ng-disabled="vm.installingAddons"/>
                              </div>
                            </div>
                            <div class="checkbox">
                              <label>
                                <input type="checkbox" ng-model="vm.addonsForm.AZURE_DCOS.isEnabled">
                                {{vm.addonsForm.AZURE_DCOS.displayName}}
                              </label>
                            </div>
                            <div class="checkbox">
                              <label>
                                <input type="checkbox" ng-model="vm.addonsForm.CLUSTER.isEnabled">
                                {{vm.addonsForm.CLUSTER.displayName}}
                              </label>
                            </div>
                            <div class="checkbox">
                              <label>
                                <input type="checkbox" ng-model="vm.addonsForm.DCL.isEnabled">
                                {{vm.addonsForm.DCL.displayName}}
                              </label>
                            </div>
                            <div class="checkbox">
                              <label>
                                <input type="checkbox" ng-model="vm.addonsForm.DDC.isEnabled">
                                {{vm.addonsForm.DDC.displayName}}
                              </label>
                            </div>
                            <div class="checkbox">
                              <label>
                                <input type="checkbox" ng-model="vm.addonsForm.GKE.isEnabled">
                                {{vm.addonsForm.GKE.displayName}}
                              </label>
                            </div>
                            <div class="checkbox">
                              <label>
                                <input type="checkbox" ng-model="vm.addonsForm.KUBERNETES.isEnabled">
                                {{vm.addonsForm.KUBERNETES.displayName}}
                              </label>
                            </div>
                            <div class="checkbox">
                              <label>
                                <input type="checkbox" ng-model="vm.addonsForm.TRIPUB.isEnabled">
                                {{vm.addonsForm.TRIPUB.displayName}}
                              </label>
                            </div>
                          </div>
                        </div>
                      </div>
                      <!-- Notifications -->
                      <div class="col-md-offset-1 col-md-11">
                        <div class="row">
                          <div class="col-md-12">
                            <b>Notifications</b>
                          </div>
                        </div>
                      </div>
                      <div class="col-md-offset-2 col-md-10">
                        <div class="row">
                          <div class="col-md-12">
                            <div class="checkbox">
                              <label>
                                <input type="checkbox" ng-model="vm.addonsForm.webhook.isEnabled">
                                {{vm.addonsForm.webhook.displayName}}
                              </label>
                            </div>
                            <div class="checkbox">
                              <label>
                                <input type="checkbox" ng-model="vm.addonsForm.hipchat.isEnabled">
                                {{vm.addonsForm.hipchat.displayName}}
                              </label>
                            </div>
                            <div class="checkbox">
                              <label>
                                <input type="checkbox" ng-model="vm.addonsForm.irc.isEnabled">
                                {{vm.addonsForm.irc.displayName}}
                              </label>
                            </div>
                            <div class="checkbox">
                              <label>
                                <input type="checkbox" ng-model="vm.addonsForm.Slack.isEnabled">
                                {{vm.addonsForm.Slack.displayName}}
                              </label>
                            </div>
                          </div>
                        </div>
                      </div>
                      <!-- Registries -->
                      <div class="col-md-offset-1 col-md-11">
                        <div class="row">
                          <div class="col-md-12">
                            <b>Registries</b>
                          </div>
                        </div>
                      </div>
                      <div class="col-md-offset-2 col-md-10">
                        <div class="row">
                          <div class="col-md-12">
                            <div class="checkbox">
                              <label>
                                <input type="checkbox" ng-model="vm.addonsForm.ECR.isEnabled">
                                {{vm.addonsForm.ECR.displayName}} <span ng-if="vm.addonsForm.ECR.isDeprecated" title="This integration has been deprecated. New integrations of this type cannot be created anymore. If enabled, existing integrations can continue to be used. Please use {{vm.addonsForm.amazonKeys.displayName}} instead.">(Deprecated) 🛈</i></span>
                              </label>
                            </div>
                            <div class="checkbox">
                              <label>
                                <input type="checkbox" ng-model="vm.addonsForm.amazonKeys.isEnabled">
                                {{vm.addonsForm.amazonKeys.displayName}} <span title="{{vm.addonsForm.amazonKeys.displayName}} is a unifying integration which can be used for ECR as well as other AWS services.">(ECR) 🛈</span>
                              </label>
                            </div>
                            <div class="checkbox">
                              <label>
                                <input type="checkbox" ng-model="vm.addonsForm.Docker.isEnabled">
                                {{vm.addonsForm.Docker.displayName}}
                              </label>
                            </div>
                            <div class="checkbox">
                              <label>
                                <input type="checkbox" ng-model="vm.addonsForm['Docker Trusted Registry'].isEnabled">
                                {{vm.addonsForm['Docker Trusted Registry'].displayName}}
                              </label>
                            </div>
                            <div class="checkbox">
                              <label>
                                <input type="checkbox" ng-model="vm.addonsForm.GCR.isEnabled">
                                {{vm.addonsForm.GCR.displayName}}
                              </label>
                            </div>
                            <div class="checkbox">
                              <label>
                                <input type="checkbox" ng-model="vm.addonsForm.artifactory.isEnabled">
                                {{vm.addonsForm.artifactory.displayName}}
                              </label>
                            </div>
                            <div class="checkbox">
                              <label>
                                <input type="checkbox" ng-model="vm.addonsForm.artifactoryKey.isEnabled">
                                {{vm.addonsForm.artifactory.displayName}} (Generic)
                              </label>
                            </div>
                            <div class="checkbox">
                              <label>
                                <input type="checkbox" ng-model="vm.addonsForm['Private Docker Registry'].isEnabled">
                                {{vm.addonsForm['Private Docker Registry'].displayName}}
                              </label>
                            </div>
                            <div class="checkbox">
                              <label>
                                <input type="checkbox" ng-model="vm.addonsForm['Quay.io'].isEnabled">
                                {{vm.addonsForm['Quay.io'].displayName}}
                              </label>
                            </div>
                            <div class="checkbox">
                              <label>
                                <input type="checkbox" ng-model="vm.addonsForm.quayLogin.isEnabled">
                                {{vm.addonsForm.quayLogin.displayName}} (Generic)
                              </label>
                            </div>
                          </div>
                        </div>
                      </div>
                      <!-- Other -->
                      <div class="col-md-offset-1 col-md-11">
                        <div class="row">
                          <div class="col-md-12">
                            <b>Other</b>
                          </div>
                        </div>
                      </div>
                      <div class="col-md-offset-2 col-md-10">
                        <div class="row">
                          <div class="col-md-12">
                            <div class="checkbox">
                              <label>
                                <input type="checkbox" ng-model="vm.addonsForm.Jenkins.isEnabled">
                                {{vm.addonsForm.Jenkins.displayName}}
                              </label>
                            </div>
                            <div class="checkbox">
                              <label>
                                <input type="checkbox" ng-model="vm.addonsForm['pem-key'].isEnabled">
                                {{vm.addonsForm['pem-key'].displayName}}
                              </label>
                            </div>
                            <div class="checkbox">
                              <label>
                                <input type="checkbox" ng-model="vm.addonsForm.pemKey.isEnabled">
                                {{vm.addonsForm.pemKey.displayName}} (Generic)
                              </label>
                            </div>
                            <div class="checkbox">
                              <label>
                                <input type="checkbox" ng-model="vm.addonsForm.DOC.isEnabled">
                                {{vm.addonsForm.DOC.displayName}}
                              </label>
                            </div>
                            <div class="checkbox">
                              <label>
                                <input type="checkbox" ng-model="vm.addonsForm.keyValuePair.isEnabled">
                                {{vm.addonsForm.keyValuePair.displayName}}
                              </label>
                            </div>
                            <div class="checkbox">
                              <label>
                                <input type="checkbox" ng-model="vm.addonsForm.MAZ.isEnabled">
                                {{vm.addonsForm.MAZ.displayName}}
                              </label>
                            </div>
                            <div class="checkbox">
                              <label>
                                <input type="checkbox" ng-model="vm.addonsForm.GCL.isEnabled">
                                {{vm.addonsForm.GCL.displayName}}
                              </label>
                            </div>
                            <div class="checkbox">
                              <label>
                                <input type="checkbox" ng-model="vm.addonsForm.gitCredential.isEnabled">
                                {{vm.addonsForm.gitCredential.displayName}}
                              </label>
                            </div>
                            <!-- hubspot -->
                            <div class="checkbox" ng-if="vm.addonsForm.systemIntegrations.mktg.isEnabled || (vm.admiralEnv.IS_SERVER === false)">
                              <label>
                                <input type="checkbox" ng-model="vm.addonsForm.systemIntegrations.mktg.isEnabled">
                                Hubspot
                              </label>
                            </div>
                            <div class="row" ng-if="vm.addonsForm.systemIntegrations.mktg.isEnabled">
                              <div class="col-md-offset-1 col-md-3">
                                hubspotListId
                              </div>
                              <div class="col-md-8">
                                <input type="number" class="form-control input-sm" name="hubspotListId"
                                  ng-model="vm.addonsForm.systemSettings.hubspotListId" ng-disabled="vm.installingAddons"/>
                              </div>
                            </div>
                            <div class="row" ng-if="vm.addonsForm.systemIntegrations.mktg.isEnabled">
                              <div class="col-md-offset-1 col-md-11">
                                <div class="checkbox">
                                  <label>
                                    <input type="checkbox" ng-model="vm.addonsForm.systemSettings.hubspotShouldSimulate">
                                    hubspotShouldSimulate
                                  </label>
                                </div>
                              </div>
                            </div>
                            <div class="row" ng-if="vm.addonsForm.systemIntegrations.mktg.isEnabled">
                              <div class="col-md-12" ng-if="vm.addonsForm.systemIntegrations.mktg.isEnabled">
                                <div class="row">
                                  <div class="col-md-offset-1 col-md-3">
                                    Hubspot API Endpoint
                                  </div>
                                  <div class="col-md-8">
                                    <input type="text" class="form-control input-sm" name="hubspotApiEndPoint"
                                      ng-model="vm.addonsForm.systemIntegrations.mktg.data.hubspotApiEndPoint" ng-disabled="vm.installingAddons"/>
                                  </div>
                                </div>
                                <div class="row">
                                  <div class="col-md-offset-1 col-md-3">
                                    Hubspot API Token
                                  </div>
                                  <div class="col-md-8">
                                    <input type="text" class="form-control input-sm" name="hubspotApiToken"
                                      ng-model="vm.addonsForm.systemIntegrations.mktg.data.hubspotApiToken" ng-disabled="vm.installingAddons"/>
                                  </div>
                                </div>
                              </div>
                            </div>
                            <!-- clearbit -->
                            <div class="checkbox" ng-if="vm.addonsForm.systemIntegrations.clearbit.isEnabled || (vm.admiralEnv.IS_SERVER === false)">
                              <label>
                                <input type="checkbox" ng-model="vm.addonsForm.systemIntegrations.clearbit.isEnabled">
                                Clearbit
                              </label>
                            </div>
                            <div class="row" ng-if="vm.addonsForm.systemIntegrations.clearbit.isEnabled">
                              <div class="col-md-offset-1 col-md-3">
                                API Key
                              </div>
                              <div class="col-md-8">
                                <input type="text" class="form-control input-sm" name="clearbitApiKey"
                                  ng-model="vm.addonsForm.systemIntegrations.clearbit.data.envs.clearbitApiKey" ng-disabled="vm.installingAddons"/>
                              </div>
                            </div>
                            <!-- deploy -->
                            <div class="checkbox" ng-if="vm.addonsForm.systemIntegrations.deploy.isEnabled || (vm.admiralEnv.IS_SERVER === false)">
                              <label>
                                <input type="checkbox" ng-model="vm.addonsForm.systemIntegrations.deploy.isEnabled">
                                AWS Deploy Integration
                              </label>
                            </div>
                            <div class="row" ng-if="vm.addonsForm.systemIntegrations.deploy.isEnabled">
                              <div class="col-md-offset-1 col-md-3">
                                Access Key
                              </div>
                              <div class="col-md-8">
                                <input type="text" class="form-control input-sm" name="deployAccessKey"
                                  ng-model="vm.addonsForm.systemIntegrations.deploy.data.accessKey" ng-disabled="vm.installingAddons"/>
                              </div>
                              <div class="col-md-offset-1 col-md-3">
                                Secret Key
                              </div>
                              <div class="col-md-8">
                                <input type="text" class="form-control input-sm" name="deploySecretKey"
                                  ng-model="vm.addonsForm.systemIntegrations.deploy.data.secretKey" ng-disabled="vm.installingAddons"/>
                              </div>
                            </div>
                            <!-- mktgDB -->
                            <div class="checkbox" ng-if="vm.addonsForm.systemIntegrations.mktgDB.isEnabled || (vm.admiralEnv.IS_SERVER === false)">
                              <label>
                                <input type="checkbox" ng-model="vm.addonsForm.systemIntegrations.mktgDB.isEnabled">
                                Mktg DB
                              </label>
                            </div>
                            <div class="row" ng-if="vm.addonsForm.systemIntegrations.mktgDB.isEnabled">
                              <div class="col-md-offset-1 col-md-3">
                                DB Name
                              </div>
                              <div class="col-md-8">
                                <input type="text" class="form-control input-sm" name="mktgDBName"
                                  ng-model="vm.addonsForm.systemIntegrations.mktgDB.data.envs.dbName" ng-disabled="vm.installingAddons"/>
                              </div>
                              <div class="col-md-offset-1 col-md-3">
                                DB Username
                              </div>
                              <div class="col-md-8">
                                <input type="text" class="form-control input-sm" name="mktgDBUsername"
                                  ng-model="vm.addonsForm.systemIntegrations.mktgDB.data.envs.dbUsername" ng-disabled="vm.installingAddons"/>
                              </div>
                              <div class="col-md-offset-1 col-md-3">
                                DB Password
                              </div>
                              <div class="col-md-8">
                                <input type="text" class="form-control input-sm" name="mktgDBPassword"
                                  ng-model="vm.addonsForm.systemIntegrations.mktgDB.data.envs.dbPassword" ng-disabled="vm.installingAddons"/>
                              </div>
                              <div class="col-md-offset-1 col-md-3">
                                DB Host
                              </div>
                              <div class="col-md-8">
                                <input type="text" class="form-control input-sm" name="mktgDBHost"
                                  ng-model="vm.addonsForm.systemIntegrations.mktgDB.data.envs.dbHost" ng-disabled="vm.installingAddons"/>
                              </div>
                              <div class="col-md-offset-1 col-md-3">
                                DB Port
                              </div>
                              <div class="col-md-8">
                                <input type="text" class="form-control input-sm" name="mktgDBPort"
                                  ng-model="vm.addonsForm.systemIntegrations.mktgDB.data.envs.dbPort" ng-disabled="vm.installingAddons"/>
                              </div>
                              <div class="col-md-offset-1 col-md-3">
                                DB Dialect
                              </div>
                              <div class="col-md-8">
                                <input type="text" class="form-control input-sm" name="mktgDBDialect"
                                  ng-model="vm.addonsForm.systemIntegrations.mktgDB.data.envs.dbDialect" ng-disabled="vm.installingAddons"/>
                              </div>
                            </div>
                            <!-- payment -->
                            <div class="checkbox" ng-if="vm.addonsForm.systemIntegrations.payment.isEnabled || (vm.admiralEnv.IS_SERVER === false)">
                              <label>
                                <input type="checkbox" ng-model="vm.addonsForm.systemIntegrations.payment.isEnabled">
                                Braintree
                              </label>
                            </div>
                            <div class="row" ng-if="vm.addonsForm.systemIntegrations.payment.isEnabled">
                              <div class="col-md-offset-1 col-md-3">
                                Merchant ID
                              </div>
                              <div class="col-md-8">
                                <input type="text" class="form-control input-sm" name="braintreeMerchantId"
                                  ng-model="vm.addonsForm.systemIntegrations.payment.data.braintreeMerchantId" ng-disabled="vm.installingAddons"/>
                              </div>
                              <div class="col-md-offset-1 col-md-3">
                                Public Key
                              </div>
                              <div class="col-md-8">
                                <input type="text" class="form-control input-sm" name="braintreePublicKey"
                                  ng-model="vm.addonsForm.systemIntegrations.payment.data.braintreePublicKey" ng-disabled="vm.installingAddons"/>
                              </div>
                              <div class="col-md-offset-1 col-md-3">
                                Private Key
                              </div>
                              <div class="col-md-8">
                                <input type="text" class="form-control input-sm" name="braintreePrivateKey"
                                  ng-model="vm.addonsForm.systemIntegrations.payment.data.braintreePrivateKey" ng-disabled="vm.installingAddons"/>
                              </div>
                              <div class="col-md-offset-1 col-md-3">
                                Environment
                              </div>
                              <div class="col-md-8">
                                <input type="text" class="form-control input-sm" name="braintreeEnvironment"
                                  ng-model="vm.addonsForm.systemIntegrations.payment.data.braintreeEnvironment" ng-disabled="vm.installingAddons"/>
                              </div>
                            </div>
                            <!-- segment -->
                            <div class="checkbox" ng-if="vm.addonsForm.systemIntegrations.segment.isEnabled || (vm.admiralEnv.IS_SERVER === false)">
                              <label>
                                <input type="checkbox" ng-model="vm.addonsForm.systemIntegrations.segment.isEnabled">
                                Segment
                              </label>
                            </div>
                            <div class="row" ng-if="vm.addonsForm.systemIntegrations.segment.isEnabled">
                              <div class="col-md-offset-1 col-md-3">
                                API Key
                              </div>
                              <div class="col-md-8">
                                <input type="text" class="form-control input-sm" name="segmentApiKey"
                                  ng-model="vm.addonsForm.systemIntegrations.segment.data.envs.segmentApiKey" ng-disabled="vm.installingAddons"/>
                              </div>
                              <div class="col-md-offset-1 col-md-3">
                                Mktg Key
                              </div>
                              <div class="col-md-8">
                                <input type="text" class="form-control input-sm" name="segmentMktgKey"
                                  ng-model="vm.addonsForm.systemIntegrations.segment.data.envs.segmentMktgKey" ng-disabled="vm.installingAddons"/>
                              </div>
                           </div>
                         </div>
                       </div>
                      </div>
                      <div>
                        &nbsp;
                      </div>
                      <div class="col-md-offset-1 col-md-10 text-right">
                        <p>
                          &nbsp;
                        </p>
                        <button class="btn btn-md btn-primary" type="submit" ng-disabled="vm.installingAddons" ng-click="vm.installAddons()">
                          <div ng-if="vm.installingAddons">
                            Installing Add-ons...
                          </div>
                          <div ng-if="!vm.installingAddons">
                            Install Add-ons
                          </div>
                        </button>
                      </div>
                      <div class="col-md-11" style="border-bottom: 1px solid #DDDDDD;">
                        &nbsp;
                      </div>
                    </div>
                  <!-- SuperUsers -->
                    <div class="row">
                      <div class="col-md-10">
                        &nbsp;
                        <h4 class="panel-title">
                          Manage System SuperUsers:
                        </h4>
                        &nbsp;
                      </div>
                      <div class="col-md-offset-1">
                        <div class="row">
                          <div class="col-md-10">
                            Add superUser:
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-2 text-right">
                            Account ID:
                          </div>
                          <div class="col-md-3">
                            <input type="text" class="form-control input-sm" name="superUserAccountID" placeholder="abcdef0123456789abcdef01"
                            ng-model="vm.superUsers.newSuperUser" ng-disabled="vm.superUsers.addingSuperUser"/>
                          </div>
                          <div class="col-md-5">
                            <button ng-click="vm.addSuperUser()" ng-disabled="vm.superUsers.addingSuperUser">
                              Add
                            </button>
                          </div>
                        </div>
                        <div class="row">
                          &nbsp;
                        </div>
                        <div class="row">
                          <div class="col-md-10">
                            Current SuperUsers:
                          </div>
                        </div>
                        <div class="row">
                          <div ng-if="!vm.superUsers.superUsers.length" class="col-md-offset-2 col-md-10">
                            <i>No current SuperUsers</i>
                          </div>
                          <div ng-if="vm.superUsers.superUsers.length">
                            <div ng-repeat="superUser in vm.superUsers.superUsers">
                              <div class="col-md-offset-2 col-md-3">
                                {{superUser}}
                              </div>
                              <div class="col-md-5">
                                <button ng-click="vm.removeSuperUser(superUser)" ng-disabled="vm.superUsers.deletingSuperUser">
                                  Remove
                                </button>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="col-md-11" style="border-bottom: 1px solid #DDDDDD;">
                        &nbsp;
                      </div>
                    </div>
                    <!-- System nodes -->
                    <div class="row"
                      ng-if="vm.runMode === 'dev'">
                      <div class="col-md-10">
                        &nbsp;
                        <h4 class="panel-title">
                          Manage System Nodes:
                        </h4>
                        &nbsp;
                      </div>
                      <div class="row">
                        &nbsp;
                      </div>
                      <div class="col-md-offset-1">
                        <div class="row">
                          <div class="col-md-2 text-right">
                            Add system node:
                          </div>
                          <div class="col-md-offset-2">
                            <div class="col-md-5">
                              <button ng-click="vm.addSystemNode()" ng-disabled="vm.systemNodes.addingSystemNode">
                                Initialize system node
                              </button>
                            </div>
                          </div>
                        </div>
                        <div class="row">
                          &nbsp;
                        </div>
                        <div class="row">
                          Current system nodes:
                        </div>
                        <div class="row">
                          <div ng-if="!vm.systemNodes.systemNodes.length" class="col-md-offset-2 col-md-10">
                            <i>No current SystemNodes</i>
                          </div>
                          <div ng-if="vm.systemNodes.systemNodes.length">
                            <div ng-repeat="systemNode in vm.systemNodes.systemNodes">
                              <div class="col-md-offset-2 col-md-3">
                                {{systemNode.friendlyName}}
                              </div>
                              <div class="col-md-6">
                                <button ng-click="vm.removeSystemNode(systemNode)"
                                  ng-disabled="vm.systemNodes.deletingSystemNode">
                                  Remove
                                </button>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Configs Modal -->
  <div class="modal fade" id="configsModal"
    tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal"
            aria-label="Close">
          <span aria-hidden="true">&times;</span></button>
          <h4 class="modal-title">{{vm.selectedService.displayName}} Configs</h4>
        </div>
        <div class="modal-body">
          <table class="table table-condensed table-striped">
            <thead>
              <tr>
                <th></th>
                <th></th>
              </tr>
            </thead>
            <tbody>
              <tr ng-repeat="config in vm.selectedService.configs">
                <td>
                  <b>{{config.key}}:</b>
                </td>
                <td style="word-wrap: break-word; word-break: break-all;">
                  {{config.value}}
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        <div class="modal-footer">
        </div>
      </div>
    </div>
  </div>
  <!-- Logs Modal -->
  <div class="modal fade" id="logsModal"
    tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal"
            aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
          <h4 class="modal-title">
            {{vm.selectedService.displayName}} Logs
            <button class="btn btn-sm btn-default" ng-click="vm.refreshLogs()">
              Refresh
            </button>
          </h4>
        </div>
        <div class="modal-body ship-console">
          <div class="ship-console-command-line" ng-repeat="log in vm.selectedService.logs track by $index">
            {{log}}
          </div>
        </div>
        <div class="modal-footer">
        </div>
      </div>
    </div>
  </div>
  <!-- Save Services Modal -->
  <div class="modal fade" id="saveServicesModal"
    tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal"
            aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
          <h4 class="modal-title">
            Save Services
          </h4>
        </div>
        <div class="modal-body">
          <div>
            Saving will immediately update your services.
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-md btn-primary" type="submit" ng-click="vm.saveServices()">
            Save
          </button>
          <button class="btn btn-md btn-default" type="button" class="close" data-dismiss="modal">
            Cancel
          </button>
        </div>
      </div>
    </div>
  </div>
  <!-- Save Modal -->
  <div class="modal fade" id="saveModal"
    tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal"
            aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
          <h4 class="modal-title">
            Restart Required
          </h4>
        </div>
        <div class="modal-body">
          <div>
            A restart is required for your changes to take effect.
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-md btn-primary" type="submit" ng-click="vm.save()">
            Save
          </button>
          <button class="btn btn-md btn-default" type="button" class="close" data-dismiss="modal">
            Cancel
          </button>
        </div>
      </div>
    </div>
  </div>
  <!-- Restart Services Modal -->
  <div class="modal fade" id="restartServicesModal"
    tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal"
            aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
          <h4 class="modal-title">
            Restart Services
          </h4>
        </div>
        <div class="modal-body">
          <div>
            This will restart all your services. Are you sure?
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-md btn-primary" type="submit" ng-click="vm.restartServices()">
            Yes
          </button>
          <button class="btn btn-md btn-default" type="button" class="close" data-dismiss="modal">
            Cancel
          </button>
        </div>
      </div>
    </div>
  </div>
  <!-- EULA Modal -->
  <div class="modal fade" id="eulaModal"
    tabindex="-1" role="dialog">
    <div class="modal-dialog modal-wide" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal"
            aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
          <h4 class="modal-title">
            Shippable Server License Agreement
          </h4>
        </div>
        <div class="modal-body ship-eula-text">
          </pre>{{vm.eulaText}}</pre>
        </div>
        <div class="modal-footer">
          <button class="btn btn-md btn-default" type="button" data-dismiss="modal">
            OK
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
